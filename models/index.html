
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../exposures/">
      
      
        <link rel="next" href="../treaty/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Models - pyRE - python package for non-life reinsurance pricing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#models-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="pyRE - python package for non-life reinsurance pricing" class="md-header__button md-logo" aria-label="pyRE - python package for non-life reinsurance pricing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyRE - python package for non-life reinsurance pricing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Models
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="pyRE - python package for non-life reinsurance pricing" class="md-nav__button md-logo" aria-label="pyRE - python package for non-life reinsurance pricing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    pyRE - python package for non-life reinsurance pricing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../claims/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Claims
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../exposures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exposures
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#submodules" class="md-nav__link">
    <span class="md-ellipsis">
      Submodules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submodules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experience-rating" class="md-nav__link">
    <span class="md-ellipsis">
      Experience Rating
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rating" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rating
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate-features" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregate Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trending" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experience-rating_1" class="md-nav__link">
    <span class="md-ellipsis">
      Experience Rating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Experience Rating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#burn-cost-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Burn Cost Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequency-severity-modeling" class="md-nav__link">
    <span class="md-ellipsis">
      Frequency-Severity Modeling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rating_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exposure Rating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#increased-limit-factors" class="md-nav__link">
    <span class="md-ellipsis">
      Increased Limit Factors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trending_1" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      API Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost" class="md-nav__link">
    <span class="md-ellipsis">
      burn_cost
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel" class="md-nav__link">
    <span class="md-ellipsis">
      BurnCostModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BurnCostModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.a_priori" class="md-nav__link">
    <span class="md-ellipsis">
      a_priori
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.data" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.development_pattern" class="md-nav__link">
    <span class="md-ellipsis">
      development_pattern
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.layer_id" class="md-nav__link">
    <span class="md-ellipsis">
      layer_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.modelling_years" class="md-nav__link">
    <span class="md-ellipsis">
      modelling_years
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.projection_methods" class="md-nav__link">
    <span class="md-ellipsis">
      projection_methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.years_weighting" class="md-nav__link">
    <span class="md-ellipsis">
      years_weighting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.calculate_burn_cost" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_burn_cost
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.ProjectionMethods" class="md-nav__link">
    <span class="md-ellipsis">
      ProjectionMethods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.bf_method" class="md-nav__link">
    <span class="md-ellipsis">
      bf_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.cape_cod_method" class="md-nav__link">
    <span class="md-ellipsis">
      cape_cod_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.cape_cod_prior_algo" class="md-nav__link">
    <span class="md-ellipsis">
      cape_cod_prior_algo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.chainladder_method" class="md-nav__link">
    <span class="md-ellipsis">
      chainladder_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.generalised_cape_cod_method" class="md-nav__link">
    <span class="md-ellipsis">
      generalised_cape_cod_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting" class="md-nav__link">
    <span class="md-ellipsis">
      curve_fitting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.assess_error_assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      assess_error_assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.exponential_fit" class="md-nav__link">
    <span class="md-ellipsis">
      exponential_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.inverse_power_fit" class="md-nav__link">
    <span class="md-ellipsis">
      inverse_power_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.linear_regression" class="md-nav__link">
    <span class="md-ellipsis">
      linear_regression
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.power_fit" class="md-nav__link">
    <span class="md-ellipsis">
      power_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.r_squared" class="md-nav__link">
    <span class="md-ellipsis">
      r_squared
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.weibull_fit" class="md-nav__link">
    <span class="md-ellipsis">
      weibull_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity" class="md-nav__link">
    <span class="md-ellipsis">
      frequency_severity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity.severity_fit" class="md-nav__link">
    <span class="md-ellipsis">
      severity_fit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="severity_fit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity.severity_fit.fit" class="md-nav__link">
    <span class="md-ellipsis">
      fit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.pareto_rating" class="md-nav__link">
    <span class="md-ellipsis">
      pareto_rating
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling" class="md-nav__link">
    <span class="md-ellipsis">
      resampling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling" class="md-nav__link">
    <span class="md-ellipsis">
      resampling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resampling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling.resample" class="md-nav__link">
    <span class="md-ellipsis">
      resample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd" class="md-nav__link">
    <span class="md-ellipsis">
      mbbefd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd.swissRe_c_values" class="md-nav__link">
    <span class="md-ellipsis">
      swissRe_c_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd.mbbefd_curve" class="md-nav__link">
    <span class="md-ellipsis">
      mbbefd_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mixed_exponential" class="md-nav__link">
    <span class="md-ellipsis">
      mixed_exponential
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mixed_exponential.mixed_exponential_curve" class="md-nav__link">
    <span class="md-ellipsis">
      mixed_exponential_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.pareto_ilf" class="md-nav__link">
    <span class="md-ellipsis">
      pareto_ilf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.riebesell" class="md-nav__link">
    <span class="md-ellipsis">
      riebesell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.riebesell.riebesell_curve" class="md-nav__link">
    <span class="md-ellipsis">
      riebesell_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.aggregate_features" class="md-nav__link">
    <span class="md-ellipsis">
      aggregate_features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections" class="md-nav__link">
    <span class="md-ellipsis">
      selections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight" class="md-nav__link">
    <span class="md-ellipsis">
      CredibilityWeight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CredibilityWeight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.bayesian_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      bayesian_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      buhlmann_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_straub_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      buhlmann_straub_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_data_variance" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_data_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_sample_variance" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_sample_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_process_variance" class="md-nav__link">
    <span class="md-ellipsis">
      estimate_process_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_variance_of_hypothetical_means" class="md-nav__link">
    <span class="md-ellipsis">
      estimate_variance_of_hypothetical_means
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.greatest_accuracy_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      greatest_accuracy_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.limited_fluctuation_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      limited_fluctuation_credibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections" class="md-nav__link">
    <span class="md-ellipsis">
      Selections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.calculate_experience_weight" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_experience_weight
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.exposure_weight" class="md-nav__link">
    <span class="md-ellipsis">
      exposure_weight
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.make_selection" class="md-nav__link">
    <span class="md-ellipsis">
      make_selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.unlimited_selection" class="md-nav__link">
    <span class="md-ellipsis">
      unlimited_selection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.simulation_engine" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_engine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending" class="md-nav__link">
    <span class="md-ellipsis">
      trending
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trending">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.calculate_trend_factor" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_trend_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.get_trend_factors" class="md-nav__link">
    <span class="md-ellipsis">
      get_trend_factors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.trend_claims" class="md-nav__link">
    <span class="md-ellipsis">
      trend_claims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.trend_exposures" class="md-nav__link">
    <span class="md-ellipsis">
      trend_exposures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.calculate_trend_factor" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_trend_factor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.get_trend_factors" class="md-nav__link">
    <span class="md-ellipsis">
      get_trend_factors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.trend_claims" class="md-nav__link">
    <span class="md-ellipsis">
      trend_claims
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.trend_exposures" class="md-nav__link">
    <span class="md-ellipsis">
      trend_exposures
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../treaty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Treaty
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rate_monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rate Monitoring
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#submodules" class="md-nav__link">
    <span class="md-ellipsis">
      Submodules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submodules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experience-rating" class="md-nav__link">
    <span class="md-ellipsis">
      Experience Rating
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rating" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rating
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate-features" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregate Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trending" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experience-rating_1" class="md-nav__link">
    <span class="md-ellipsis">
      Experience Rating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Experience Rating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#burn-cost-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Burn Cost Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequency-severity-modeling" class="md-nav__link">
    <span class="md-ellipsis">
      Frequency-Severity Modeling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rating_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exposure Rating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#increased-limit-factors" class="md-nav__link">
    <span class="md-ellipsis">
      Increased Limit Factors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trending_1" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      API Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost" class="md-nav__link">
    <span class="md-ellipsis">
      burn_cost
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel" class="md-nav__link">
    <span class="md-ellipsis">
      BurnCostModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BurnCostModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.a_priori" class="md-nav__link">
    <span class="md-ellipsis">
      a_priori
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.data" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.development_pattern" class="md-nav__link">
    <span class="md-ellipsis">
      development_pattern
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.layer_id" class="md-nav__link">
    <span class="md-ellipsis">
      layer_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.modelling_years" class="md-nav__link">
    <span class="md-ellipsis">
      modelling_years
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.projection_methods" class="md-nav__link">
    <span class="md-ellipsis">
      projection_methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.years_weighting" class="md-nav__link">
    <span class="md-ellipsis">
      years_weighting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.BurnCostModel.calculate_burn_cost" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_burn_cost
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.ProjectionMethods" class="md-nav__link">
    <span class="md-ellipsis">
      ProjectionMethods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.bf_method" class="md-nav__link">
    <span class="md-ellipsis">
      bf_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.cape_cod_method" class="md-nav__link">
    <span class="md-ellipsis">
      cape_cod_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.cape_cod_prior_algo" class="md-nav__link">
    <span class="md-ellipsis">
      cape_cod_prior_algo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.chainladder_method" class="md-nav__link">
    <span class="md-ellipsis">
      chainladder_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.burn_cost.generalised_cape_cod_method" class="md-nav__link">
    <span class="md-ellipsis">
      generalised_cape_cod_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting" class="md-nav__link">
    <span class="md-ellipsis">
      curve_fitting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.assess_error_assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      assess_error_assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.exponential_fit" class="md-nav__link">
    <span class="md-ellipsis">
      exponential_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.inverse_power_fit" class="md-nav__link">
    <span class="md-ellipsis">
      inverse_power_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.linear_regression" class="md-nav__link">
    <span class="md-ellipsis">
      linear_regression
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.power_fit" class="md-nav__link">
    <span class="md-ellipsis">
      power_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.r_squared" class="md-nav__link">
    <span class="md-ellipsis">
      r_squared
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.curve_fitting.weibull_fit" class="md-nav__link">
    <span class="md-ellipsis">
      weibull_fit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity" class="md-nav__link">
    <span class="md-ellipsis">
      frequency_severity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity.severity_fit" class="md-nav__link">
    <span class="md-ellipsis">
      severity_fit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="severity_fit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.frequency_severity.severity_fit.fit" class="md-nav__link">
    <span class="md-ellipsis">
      fit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.pareto_rating" class="md-nav__link">
    <span class="md-ellipsis">
      pareto_rating
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling" class="md-nav__link">
    <span class="md-ellipsis">
      resampling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling" class="md-nav__link">
    <span class="md-ellipsis">
      resampling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resampling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.Experience.resampling.resampling.resample" class="md-nav__link">
    <span class="md-ellipsis">
      resample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd" class="md-nav__link">
    <span class="md-ellipsis">
      mbbefd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd.swissRe_c_values" class="md-nav__link">
    <span class="md-ellipsis">
      swissRe_c_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mbbefd.mbbefd_curve" class="md-nav__link">
    <span class="md-ellipsis">
      mbbefd_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mixed_exponential" class="md-nav__link">
    <span class="md-ellipsis">
      mixed_exponential
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.mixed_exponential.mixed_exponential_curve" class="md-nav__link">
    <span class="md-ellipsis">
      mixed_exponential_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.pareto_ilf" class="md-nav__link">
    <span class="md-ellipsis">
      pareto_ilf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.riebesell" class="md-nav__link">
    <span class="md-ellipsis">
      riebesell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.Exposure.riebesell.riebesell_curve" class="md-nav__link">
    <span class="md-ellipsis">
      riebesell_curve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.aggregate_features" class="md-nav__link">
    <span class="md-ellipsis">
      aggregate_features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections" class="md-nav__link">
    <span class="md-ellipsis">
      selections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight" class="md-nav__link">
    <span class="md-ellipsis">
      CredibilityWeight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CredibilityWeight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.bayesian_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      bayesian_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      buhlmann_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_straub_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      buhlmann_straub_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_data_variance" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_data_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_sample_variance" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_sample_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_process_variance" class="md-nav__link">
    <span class="md-ellipsis">
      estimate_process_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_variance_of_hypothetical_means" class="md-nav__link">
    <span class="md-ellipsis">
      estimate_variance_of_hypothetical_means
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.greatest_accuracy_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      greatest_accuracy_credibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight.limited_fluctuation_credibility" class="md-nav__link">
    <span class="md-ellipsis">
      limited_fluctuation_credibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections" class="md-nav__link">
    <span class="md-ellipsis">
      Selections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.calculate_experience_weight" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_experience_weight
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.exposure_weight" class="md-nav__link">
    <span class="md-ellipsis">
      exposure_weight
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.make_selection" class="md-nav__link">
    <span class="md-ellipsis">
      make_selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.selections.Selections.unlimited_selection" class="md-nav__link">
    <span class="md-ellipsis">
      unlimited_selection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.AggregateFeatures.simulation_engine" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_engine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending" class="md-nav__link">
    <span class="md-ellipsis">
      trending
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending" class="md-nav__link">
    <span class="md-ellipsis">
      Trending
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trending">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.calculate_trend_factor" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_trend_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.get_trend_factors" class="md-nav__link">
    <span class="md-ellipsis">
      get_trend_factors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.trend_claims" class="md-nav__link">
    <span class="md-ellipsis">
      trend_claims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyre.Models.trending.Trending.trend_exposures" class="md-nav__link">
    <span class="md-ellipsis">
      trend_exposures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.calculate_trend_factor" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_trend_factor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.get_trend_factors" class="md-nav__link">
    <span class="md-ellipsis">
      get_trend_factors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.trend_claims" class="md-nav__link">
    <span class="md-ellipsis">
      trend_claims
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyre.Models.trending.trend_exposures" class="md-nav__link">
    <span class="md-ellipsis">
      trend_exposures
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="models-module">Models Module</h1>
<p>The Models module provides a variety of actuarial and statistical modeling tools for reinsurance pricing. It includes submodules for experience rating, exposure rating, and aggregate features modeling.</p>
<h2 id="submodules">Submodules</h2>
<h3 id="experience-rating">Experience Rating</h3>
<p>The Experience module provides tools for analyzing historical claims experience:</p>
<ul>
<li><code>burn_cost</code>: Methods for burn cost analysis</li>
<li><code>curve_fitting</code>: Functions for fitting curves to data</li>
<li><code>frequency_severity</code>: Tools for frequency-severity modeling</li>
<li><code>pareto_rating</code>: Pareto distribution-based rating methods</li>
<li><code>resampling</code>: Methods for resampling claims data</li>
</ul>
<h3 id="exposure-rating">Exposure Rating</h3>
<p>The Exposure module provides tools for exposure-based rating:</p>
<ul>
<li><code>mbbefd</code>: Implementation of the Modified Beta Beta Equivalent Finite Difference (MBBEFD) distribution</li>
<li><code>mixed_exponential</code>: Implementation of the Mixed Exponential distribution</li>
<li><code>pareto_ilf</code>: Pareto distribution-based Increased Limit Factors</li>
<li><code>riebesell</code>: Implementation of the Riebesell approximation</li>
</ul>
<h3 id="aggregate-features">Aggregate Features</h3>
<p>The AggregateFeatures module provides tools for modeling aggregate loss distributions:</p>
<ul>
<li><code>aggregate_features</code>: Methods for calculating aggregate loss statistics</li>
<li><code>selections</code>: Tools for selecting and combining models</li>
<li><code>simulation_engine</code>: Monte Carlo simulation engine for aggregate losses</li>
</ul>
<h3 id="trending">Trending</h3>
<p>The trending module provides tools for trending historical data to current levels.</p>
<h2 id="examples">Examples</h2>
<h3 id="experience-rating_1">Experience Rating</h3>
<h4 id="burn-cost-analysis">Burn Cost Analysis</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pyre.Models.Experience.burn_cost</span><span class="w"> </span><span class="kn">import</span> <span class="n">BurnCostModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyre.claims.claims</span><span class="w"> </span><span class="kn">import</span> <span class="n">Claims</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Assuming we have a Claims collection called &#39;claims_data&#39;</span>

<span class="c1"># Create a burn cost model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">BurnCostModel</span><span class="p">(</span><span class="n">claims_data</span><span class="p">)</span>

<span class="c1"># Calculate basic burn cost statistics</span>
<span class="n">burn_cost</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calculate_burn_cost</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average burn cost: </span><span class="si">{</span><span class="n">burn_cost</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Calculate burn cost with trend</span>
<span class="n">trend_factor</span> <span class="o">=</span> <span class="mf">1.05</span>  <span class="c1"># 5% annual trend</span>
<span class="n">years_of_trend</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">trended_burn_cost</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calculate_trended_burn_cost</span><span class="p">(</span><span class="n">trend_factor</span><span class="p">,</span> <span class="n">years_of_trend</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trended burn cost: </span><span class="si">{</span><span class="n">trended_burn_cost</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Calculate burn cost with limits</span>
<span class="n">attachment</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">5000000</span>
<span class="n">limited_burn_cost</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calculate_limited_burn_cost</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Limited burn cost: </span><span class="si">{</span><span class="n">limited_burn_cost</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Calculate confidence intervals</span>
<span class="n">confidence_level</span> <span class="o">=</span> <span class="mf">0.95</span>
<span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calculate_confidence_interval</span><span class="p">(</span><span class="n">confidence_level</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">confidence_level</span><span class="o">*</span><span class="mi">100</span><span class="si">}</span><span class="s2">% confidence interval: (</span><span class="si">{</span><span class="n">lower</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">upper</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="frequency-severity-modeling">Frequency-Severity Modeling</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pyre.Models.Experience.frequency_severity</span><span class="w"> </span><span class="kn">import</span> <span class="n">FrequencySeverityModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyre.claims.claims</span><span class="w"> </span><span class="kn">import</span> <span class="n">Claims</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Assuming we have a Claims collection called &#39;claims_data&#39;</span>

<span class="c1"># Create a frequency-severity model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">FrequencySeverityModel</span><span class="p">(</span><span class="n">claims_data</span><span class="p">)</span>

<span class="c1"># Fit frequency distribution (Poisson)</span>
<span class="n">freq_params</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_frequency_distribution</span><span class="p">(</span><span class="s2">&quot;poisson&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frequency distribution parameters: </span><span class="si">{</span><span class="n">freq_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Fit severity distribution (Lognormal)</span>
<span class="n">sev_params</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_severity_distribution</span><span class="p">(</span><span class="s2">&quot;lognormal&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Severity distribution parameters: </span><span class="si">{</span><span class="n">sev_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Simulate aggregate losses</span>
<span class="n">num_simulations</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">aggregate_losses</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">simulate_aggregate_losses</span><span class="p">(</span><span class="n">num_simulations</span><span class="p">)</span>

<span class="c1"># Calculate statistics</span>
<span class="n">mean_loss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">aggregate_losses</span><span class="p">)</span>
<span class="n">median_loss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">aggregate_losses</span><span class="p">)</span>
<span class="n">var_95</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">aggregate_losses</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>
<span class="n">var_99</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">aggregate_losses</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean aggregate loss: </span><span class="si">{</span><span class="n">mean_loss</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Median aggregate loss: </span><span class="si">{</span><span class="n">median_loss</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;95% VaR: </span><span class="si">{</span><span class="n">var_95</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;99% VaR: </span><span class="si">{</span><span class="n">var_99</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Plot histogram of aggregate losses</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">aggregate_losses</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">mean_loss</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Mean: </span><span class="si">{</span><span class="n">mean_loss</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">var_95</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;95% VaR: </span><span class="si">{</span><span class="n">var_95</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">var_99</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;99% VaR: </span><span class="si">{</span><span class="n">var_99</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Simulated Aggregate Loss Distribution&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Aggregate Loss&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<h3 id="exposure-rating_1">Exposure Rating</h3>
<h4 id="increased-limit-factors">Increased Limit Factors</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pyre.Models.Exposure.pareto_ilf</span><span class="w"> </span><span class="kn">import</span> <span class="n">ParetoILF</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Create a Pareto ILF model</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.0</span>  <span class="c1"># Pareto shape parameter</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ParetoILF</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>

<span class="c1"># Calculate increased limit factors</span>
<span class="n">base_limit</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">limits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">2000000</span><span class="p">,</span> <span class="mi">5000000</span><span class="p">,</span> <span class="mi">10000000</span><span class="p">,</span> <span class="mi">25000000</span><span class="p">]</span>
<span class="n">ilfs</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">calculate_ilf</span><span class="p">(</span><span class="n">base_limit</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span> <span class="k">for</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">limits</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Increased Limit Factors:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">limit</span><span class="p">,</span> <span class="n">ilf</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">limits</span><span class="p">,</span> <span class="n">ilfs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">limit</span><span class="o">/</span><span class="mi">1000000</span><span class="si">}</span><span class="s2">M: </span><span class="si">{</span><span class="n">ilf</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Calculate layer costs</span>
<span class="n">attachment</span> <span class="o">=</span> <span class="mi">5000000</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">5000000</span>
<span class="n">layer_cost</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calculate_layer_cost</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">attachment</span> <span class="o">+</span> <span class="n">limit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer cost for </span><span class="si">{</span><span class="n">attachment</span><span class="o">/</span><span class="mi">1000000</span><span class="si">}</span><span class="s2">M xs </span><span class="si">{</span><span class="n">limit</span><span class="o">/</span><span class="mi">1000000</span><span class="si">}</span><span class="s2">M: </span><span class="si">{</span><span class="n">layer_cost</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Plot ILF curve</span>
<span class="n">limits_plot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">base_limit</span><span class="p">,</span> <span class="mi">25000000</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ilfs_plot</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">calculate_ilf</span><span class="p">(</span><span class="n">base_limit</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span> <span class="k">for</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">limits_plot</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">limits_plot</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">ilfs_plot</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">([</span><span class="n">l</span><span class="o">/</span><span class="mi">1000000</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">limits</span><span class="p">],</span> <span class="n">ilfs</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pareto Increased Limit Factors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Limit (Millions)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;ILF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<h3 id="trending_1">Trending</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pyre.Models.trending</span><span class="w"> </span><span class="kn">import</span> <span class="n">apply_trend</span><span class="p">,</span> <span class="n">compound_trend</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Create sample data</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">2019</span><span class="p">,</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">2021</span><span class="p">,</span> <span class="mi">2022</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>

<span class="c1"># Apply trend to project future values</span>
<span class="n">annual_trend</span> <span class="o">=</span> <span class="mf">0.08</span>  <span class="c1"># 8% annual trend</span>
<span class="n">projected_years</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">2024</span><span class="p">,</span> <span class="mi">2025</span><span class="p">]</span>
<span class="n">projected_values</span> <span class="o">=</span> <span class="n">apply_trend</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">annual_trend</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">projected_years</span><span class="p">))</span>

<span class="n">all_years</span> <span class="o">=</span> <span class="n">years</span> <span class="o">+</span> <span class="n">projected_years</span>
<span class="n">all_values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">+</span> <span class="n">projected_values</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Historical and Projected Values:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">all_years</span><span class="p">,</span> <span class="n">all_values</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Calculate compound trend between two periods</span>
<span class="n">start_value</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">end_value</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">num_periods</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">years</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">implied_trend</span> <span class="o">=</span> <span class="n">compound_trend</span><span class="p">(</span><span class="n">start_value</span><span class="p">,</span> <span class="n">end_value</span><span class="p">,</span> <span class="n">num_periods</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Implied annual trend: </span><span class="si">{</span><span class="n">implied_trend</span><span class="si">:</span><span class="s2">.2%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Create a DataFrame for analysis</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Year&#39;</span><span class="p">:</span> <span class="n">all_years</span><span class="p">,</span>
    <span class="s1">&#39;Value&#39;</span><span class="p">:</span> <span class="n">all_values</span>
<span class="p">})</span>

<span class="c1"># Calculate year-over-year trends</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;YoY_Trend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Year-over-Year Trends:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">,</span> <span class="s1">&#39;YoY_Trend&#39;</span><span class="p">]])</span>
</code></pre></div>
<h2 id="api-reference">API Reference</h2>


<div class="doc doc-object doc-module">



<a id="pyre.Models.Experience.burn_cost"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.Experience.burn_cost.BurnCostModel" class="doc doc-heading">
            <code>BurnCostModel</code>


</h2>


    <div class="doc doc-contents ">


        <p>BurnCostModel is a class that calculates burn costs for a reinsurance contract layer.</p>
<p>It uses various projection methods to estimate ultimate claims and calculate burn costs
based on historical claims and exposures data.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._modelling_years">_modelling_years</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The years to be used in the modelling.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._years_weighting">_years_weighting</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weighting factors for each modelling year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._projection_methods">_projection_methods</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="ProjectionMethods (pyre.Models.Experience.burn_cost.ProjectionMethods)" href="#pyre.Models.Experience.burn_cost.ProjectionMethods">ProjectionMethods</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Projection method to use for each modelling year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._development_pattern">_development_pattern</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Development factors for each modelling year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._a_priori">_a_priori</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A priori expected loss ratios for each modelling year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._data">_data</span></code></td>
            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The claims and exposures data for the reinsurance contract.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.burn_cost.BurnCostModel._layer_id">_layer_id</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The identifier for the reinsurance contract layer.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BurnCostModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    BurnCostModel is a class that calculates burn costs for a reinsurance contract layer.</span>

<span class="sd">    It uses various projection methods to estimate ultimate claims and calculate burn costs</span>
<span class="sd">    based on historical claims and exposures data.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        _modelling_years (List[int]): The years to be used in the modelling.</span>
<span class="sd">        _years_weighting (Dict[int, float]): Weighting factors for each modelling year.</span>
<span class="sd">        _projection_methods (Dict[int, ProjectionMethods]): Projection method to use for each modelling year.</span>
<span class="sd">        _development_pattern (Dict[int, float]): Development factors for each modelling year.</span>
<span class="sd">        _a_priori (Dict[int, float]): A priori expected loss ratios for each modelling year.</span>
<span class="sd">        _data (ExperienceModelData): The claims and exposures data for the reinsurance contract.</span>
<span class="sd">        _layer_id (Any): The identifier for the reinsurance contract layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">model_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> 
                <span class="n">layer_id</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> 
                <span class="n">years_weighting</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                <span class="n">projection_methods</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">development_pattern</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">a_priori_assumption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a BurnCostModel instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            model_data (ExperienceModelData): The claims and exposures data for the reinsurance contract.</span>
<span class="sd">            layer_id (Any): The identifier for the reinsurance contract layer.</span>
<span class="sd">            years_weighting (Optional[Dict[int, float]], optional): Weighting factors for each modelling year.</span>
<span class="sd">                If None, equal weights of 1.0 will be used for all years. Defaults to None.</span>
<span class="sd">            projection_methods (Optional[Dict[int, ProjectionMethods]], optional): Projection method to use for each modelling year.</span>
<span class="sd">                If None, SIMPLE_CAPE_COD will be used for all years. Defaults to None.</span>
<span class="sd">            development_pattern (Optional[Dict[int, float]], optional): Development factors for each modelling year.</span>
<span class="sd">                If None, factors of 1.0 will be used for all years (no development). Defaults to None.</span>
<span class="sd">            a_priori_assumption (Optional[Dict[int, float]], optional): A priori expected loss ratios for each modelling year.</span>
<span class="sd">                If None, values of 0.0 will be used for all years (no a priori assumption). Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span> <span class="o">=</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_years_weighting</span> <span class="o">=</span> <span class="n">years_weighting</span> <span class="k">if</span> <span class="n">years_weighting</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span> <span class="o">=</span> <span class="n">projection_methods</span> <span class="k">if</span> <span class="n">projection_methods</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to simple cape cod method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span> <span class="o">=</span> <span class="n">development_pattern</span> <span class="k">if</span> <span class="n">development_pattern</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to no development pattern</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span> <span class="o">=</span> <span class="n">a_priori_assumption</span> <span class="k">if</span> <span class="n">a_priori_assumption</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">0.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to no a priori assumption</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">model_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span> <span class="o">=</span> <span class="n">layer_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">modelling_years</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the years to be used in the modelling.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[int]: The modelling years.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span>

    <span class="nd">@modelling_years</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">modelling_years</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the years to be used in the modelling.</span>

<span class="sd">        Args:</span>
<span class="sd">            years (List[int]): The new modelling years.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span> <span class="o">=</span> <span class="n">years</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">years_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the weighting factors for each modelling year.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[int, float]: Mapping of modelling year to weighting factor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_years_weighting</span>

    <span class="nd">@years_weighting</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">years_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weighting</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the weighting factors for each modelling year.</span>

<span class="sd">        Args:</span>
<span class="sd">            weighting (Dict[int, float]): Mapping of modelling year to weighting factor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_years_weighting</span> <span class="o">=</span> <span class="n">weighting</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">projection_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the projection method to use for each modelling year.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[int, ProjectionMethods]: Mapping of modelling year to projection method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span>

    <span class="nd">@projection_methods</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">projection_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">methods</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the projection method to use for each modelling year.</span>

<span class="sd">        Args:</span>
<span class="sd">            methods (Dict[int, ProjectionMethods]): Mapping of modelling year to projection method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span> <span class="o">=</span> <span class="n">methods</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">development_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the development factors for each modelling year.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[int, float]: Mapping of modelling year to development factor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span>

    <span class="nd">@development_pattern</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">development_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the development factors for each modelling year.</span>

<span class="sd">        Args:</span>
<span class="sd">            pattern (Dict[int, float]): Mapping of modelling year to development factor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span> <span class="o">=</span> <span class="n">pattern</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperienceModelData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the claims and exposures data for the reinsurance contract.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ExperienceModelData: The claims and exposures data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span>

    <span class="nd">@data</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the claims and exposures data for the reinsurance contract.</span>

<span class="sd">        Args:</span>
<span class="sd">            model_data (ExperienceModelData): The new claims and exposures data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">model_data</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">layer_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the identifier for the reinsurance contract layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The layer identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span>

    <span class="nd">@layer_id</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">layer_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lid</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the identifier for the reinsurance contract layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            lid (Any): The new layer identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span> <span class="o">=</span> <span class="n">lid</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">a_priori</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the a priori expected loss ratios for each modelling year.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[int, float]: Mapping of modelling year to a priori expected loss ratio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span>

    <span class="nd">@a_priori</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">a_priori</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prior</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the a priori expected loss ratios for each modelling year.</span>

<span class="sd">        Args:</span>
<span class="sd">            prior (Dict[int, float]): Mapping of modelling year to a priori expected loss ratio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span> <span class="o">=</span> <span class="n">prior</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_burn_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the burn cost for each modelling year.</span>

<span class="sd">        This method applies the specified projection method for each modelling year</span>
<span class="sd">        to calculate the burn cost based on the claims and exposures data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[int, float]: Mapping of modelling year to calculated burn cost.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">burn_costs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span><span class="p">:</span>
            <span class="c1"># Skip years that don&#39;t have data in the aggregate claims or exposures</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span> <span class="ow">or</span>
                <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">]</span> <span class="ow">or</span>
                <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="c1"># Get claims and exposures data for the year</span>
            <span class="n">claims_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">][</span><span class="n">year</span><span class="p">]</span>
            <span class="n">exposures_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>

            <span class="c1"># Get the latest incurred claims amount</span>
            <span class="n">latest_incurred</span> <span class="o">=</span> <span class="n">claims_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latest_incurred&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

            <span class="c1"># Get the earned exposure value</span>
            <span class="n">earned_exposure</span> <span class="o">=</span> <span class="n">exposures_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;earned&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

            <span class="c1"># Skip years with zero exposure to avoid division by zero</span>
            <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Get the projection method, development factor, and a priori for the year</span>
            <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">)</span>
            <span class="n">dev_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">a_priori_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

            <span class="c1"># Apply the projection method</span>
            <span class="n">projection_fn</span> <span class="o">=</span> <span class="n">projection_methods_fn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">CHAINLADDER</span><span class="p">:</span>
                    <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">GENERALISED_CAPE_COD</span><span class="p">]:</span>
                    <span class="c1"># Collect data for all years to calculate the Cape Cod prior</span>
                    <span class="n">trend_factors</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">losses</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">dev_factors</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">exposures_list</span> <span class="o">=</span> <span class="p">[]</span>

                    <span class="k">for</span> <span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">,</span> <span class="p">{})</span> <span class="ow">and</span> 
                            <span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">):</span>
                            <span class="n">yr_claims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">][</span><span class="n">yr</span><span class="p">]</span>
                            <span class="n">yr_exposures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">[</span><span class="n">yr</span><span class="p">]</span>

                            <span class="n">trend_factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Default trend factor, could be replaced with actual trend factors</span>
                            <span class="n">losses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yr_claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latest_incurred&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
                            <span class="n">dev_factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">yr</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                            <span class="n">exposures_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yr_exposures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;earned&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>

                    <span class="n">decay_factor</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Default decay factor, could be a parameter of the model</span>

                    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">:</span>
                        <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span>
                            <span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span>
                            <span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">dev_factors</span><span class="p">,</span> <span class="n">exposures_list</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># GENERALISED_CAPE_COD</span>
                        <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span>
                            <span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span>
                            <span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">dev_factors</span><span class="p">,</span> <span class="n">exposures_list</span><span class="p">,</span> <span class="n">decay_factor</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># BF</span>
                    <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span> <span class="n">a_priori_value</span><span class="p">)</span>

                <span class="c1"># Calculate burn cost as ultimate claims divided by earned exposure</span>
                <span class="n">burn_costs</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ultimate_claims</span> <span class="o">/</span> <span class="n">earned_exposure</span> <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># If there&#39;s an error, use the chainladder method as fallback</span>
                <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">chainladder_method</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">)</span>
                <span class="n">burn_costs</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ultimate_claims</span> <span class="o">/</span> <span class="n">earned_exposure</span> <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="n">burn_costs</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.a_priori" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">a_priori</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the a priori expected loss ratios for each modelling year.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[int, float]: Mapping of modelling year to a priori expected loss ratio.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">data</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the claims and exposures data for the reinsurance contract.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ExperienceModelData</code></td>            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The claims and exposures data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.development_pattern" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">development_pattern</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the development factors for each modelling year.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[int, float]: Mapping of modelling year to development factor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.layer_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">layer_id</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the identifier for the reinsurance contract layer.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer identifier.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.modelling_years" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modelling_years</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the years to be used in the modelling.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[int]: The modelling years.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.projection_methods" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">projection_methods</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the projection method to use for each modelling year.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="ProjectionMethods (pyre.Models.Experience.burn_cost.ProjectionMethods)" href="#pyre.Models.Experience.burn_cost.ProjectionMethods">ProjectionMethods</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[int, ProjectionMethods]: Mapping of modelling year to projection method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.years_weighting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">years_weighting</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the weighting factors for each modelling year.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[int, float]: Mapping of modelling year to weighting factor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">model_data</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">,</span> <span class="n">years_weighting</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection_methods</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">development_pattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_priori_assumption</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize a BurnCostModel instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_data</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The claims and exposures data for the reinsurance contract.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The identifier for the reinsurance contract layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>years_weighting</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weighting factors for each modelling year.
If None, equal weights of 1.0 will be used for all years. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>projection_methods</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="ProjectionMethods (pyre.Models.Experience.burn_cost.ProjectionMethods)" href="#pyre.Models.Experience.burn_cost.ProjectionMethods">ProjectionMethods</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Projection method to use for each modelling year.
If None, SIMPLE_CAPE_COD will be used for all years. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_pattern</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Development factors for each modelling year.
If None, factors of 1.0 will be used for all years (no development). Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>a_priori_assumption</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A priori expected loss ratios for each modelling year.
If None, values of 0.0 will be used for all years (no a priori assumption). Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">model_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> 
            <span class="n">layer_id</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> 
            <span class="n">years_weighting</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="n">projection_methods</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">development_pattern</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">a_priori_assumption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a BurnCostModel instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_data (ExperienceModelData): The claims and exposures data for the reinsurance contract.</span>
<span class="sd">        layer_id (Any): The identifier for the reinsurance contract layer.</span>
<span class="sd">        years_weighting (Optional[Dict[int, float]], optional): Weighting factors for each modelling year.</span>
<span class="sd">            If None, equal weights of 1.0 will be used for all years. Defaults to None.</span>
<span class="sd">        projection_methods (Optional[Dict[int, ProjectionMethods]], optional): Projection method to use for each modelling year.</span>
<span class="sd">            If None, SIMPLE_CAPE_COD will be used for all years. Defaults to None.</span>
<span class="sd">        development_pattern (Optional[Dict[int, float]], optional): Development factors for each modelling year.</span>
<span class="sd">            If None, factors of 1.0 will be used for all years (no development). Defaults to None.</span>
<span class="sd">        a_priori_assumption (Optional[Dict[int, float]], optional): A priori expected loss ratios for each modelling year.</span>
<span class="sd">            If None, values of 0.0 will be used for all years (no a priori assumption). Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span> <span class="o">=</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_years_weighting</span> <span class="o">=</span> <span class="n">years_weighting</span> <span class="k">if</span> <span class="n">years_weighting</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span> <span class="o">=</span> <span class="n">projection_methods</span> <span class="k">if</span> <span class="n">projection_methods</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to simple cape cod method</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span> <span class="o">=</span> <span class="n">development_pattern</span> <span class="k">if</span> <span class="n">development_pattern</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to no development pattern</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span> <span class="o">=</span> <span class="n">a_priori_assumption</span> <span class="k">if</span> <span class="n">a_priori_assumption</span> <span class="k">else</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> <span class="mf">0.0</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">model_data</span><span class="o">.</span><span class="n">exposures</span><span class="o">.</span><span class="n">modelling_years</span><span class="p">}</span>  <span class="c1"># Default to no a priori assumption</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">model_data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span> <span class="o">=</span> <span class="n">layer_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.Experience.burn_cost.BurnCostModel.calculate_burn_cost" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_burn_cost</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the burn cost for each modelling year.</p>
<p>This method applies the specified projection method for each modelling year
to calculate the burn cost based on the claims and exposures data.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[int, float]: Mapping of modelling year to calculated burn cost.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_burn_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the burn cost for each modelling year.</span>

<span class="sd">    This method applies the specified projection method for each modelling year</span>
<span class="sd">    to calculate the burn cost based on the claims and exposures data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[int, float]: Mapping of modelling year to calculated burn cost.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">burn_costs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span><span class="p">:</span>
        <span class="c1"># Skip years that don&#39;t have data in the aggregate claims or exposures</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span> <span class="ow">or</span>
            <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">]</span> <span class="ow">or</span>
            <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="c1"># Get claims and exposures data for the year</span>
        <span class="n">claims_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">][</span><span class="n">year</span><span class="p">]</span>
        <span class="n">exposures_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>

        <span class="c1"># Get the latest incurred claims amount</span>
        <span class="n">latest_incurred</span> <span class="o">=</span> <span class="n">claims_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latest_incurred&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Get the earned exposure value</span>
        <span class="n">earned_exposure</span> <span class="o">=</span> <span class="n">exposures_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;earned&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Skip years with zero exposure to avoid division by zero</span>
        <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># Get the projection method, development factor, and a priori for the year</span>
        <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projection_methods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">)</span>
        <span class="n">dev_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">a_priori_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_a_priori</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Apply the projection method</span>
        <span class="n">projection_fn</span> <span class="o">=</span> <span class="n">projection_methods_fn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">CHAINLADDER</span><span class="p">:</span>
                <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">,</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">GENERALISED_CAPE_COD</span><span class="p">]:</span>
                <span class="c1"># Collect data for all years to calculate the Cape Cod prior</span>
                <span class="n">trend_factors</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">losses</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">dev_factors</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">exposures_list</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelling_years</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">,</span> <span class="p">{})</span> <span class="ow">and</span> 
                        <span class="n">yr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">):</span>
                        <span class="n">yr_claims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_subject_contract_claims</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_layer_id</span><span class="p">][</span><span class="n">yr</span><span class="p">]</span>
                        <span class="n">yr_exposures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">aggregate_exposures</span><span class="p">[</span><span class="n">yr</span><span class="p">]</span>

                        <span class="n">trend_factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Default trend factor, could be replaced with actual trend factors</span>
                        <span class="n">losses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yr_claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latest_incurred&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
                        <span class="n">dev_factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_development_pattern</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">yr</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                        <span class="n">exposures_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yr_exposures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;earned&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>

                <span class="n">decay_factor</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Default decay factor, could be a parameter of the model</span>

                <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="n">ProjectionMethods</span><span class="o">.</span><span class="n">SIMPLE_CAPE_COD</span><span class="p">:</span>
                    <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span>
                        <span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span>
                        <span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">dev_factors</span><span class="p">,</span> <span class="n">exposures_list</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># GENERALISED_CAPE_COD</span>
                    <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span>
                        <span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span>
                        <span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">dev_factors</span><span class="p">,</span> <span class="n">exposures_list</span><span class="p">,</span> <span class="n">decay_factor</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># BF</span>
                <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">projection_fn</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">earned_exposure</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">,</span> <span class="n">a_priori_value</span><span class="p">)</span>

            <span class="c1"># Calculate burn cost as ultimate claims divided by earned exposure</span>
            <span class="n">burn_costs</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ultimate_claims</span> <span class="o">/</span> <span class="n">earned_exposure</span> <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># If there&#39;s an error, use the chainladder method as fallback</span>
            <span class="n">ultimate_claims</span> <span class="o">=</span> <span class="n">chainladder_method</span><span class="p">(</span><span class="n">latest_incurred</span><span class="p">,</span> <span class="n">dev_factor</span><span class="p">)</span>
            <span class="n">burn_costs</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ultimate_claims</span> <span class="o">/</span> <span class="n">earned_exposure</span> <span class="k">if</span> <span class="n">earned_exposure</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>

    <span class="k">return</span> <span class="n">burn_costs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pyre.Models.Experience.burn_cost.ProjectionMethods" class="doc doc-heading">
            <code>ProjectionMethods</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Enumeration of available projection methods for burn cost calculations.</p>







              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProjectionMethods</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enumeration of available projection methods for burn cost calculations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">CHAINLADDER</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">BF</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">SIMPLE_CAPE_COD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">GENERALISED_CAPE_COD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.burn_cost.bf_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bf_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">,</span> <span class="n">a_priori</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply the Bornhuetter-Ferguson method to project ultimate claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current claim amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exposure amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The development factor to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>a_priori</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The a priori expected loss ratio.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The projected ultimate claim amount.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bf_method</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">a_priori</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply the Bornhuetter-Ferguson method to project ultimate claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (float): The current claim amount.</span>
<span class="sd">        exposure (float): The exposure amount.</span>
<span class="sd">        development_factor (float): The development factor to apply.</span>
<span class="sd">        a_priori (float): The a priori expected loss ratio.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The projected ultimate claim amount.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">development_factor</span><span class="p">))</span> <span class="o">*</span> <span class="n">a_priori</span> <span class="o">*</span> <span class="n">exposure</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.burn_cost.cape_cod_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cape_cod_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">,</span> <span class="n">trend_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">losses</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">development_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exposures</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply the Cape Cod method to project ultimate claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current claim amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exposure amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The development factor to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of trend factors for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>losses</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of losses for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of development factors for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of exposures for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The projected ultimate claim amount.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the required parameters for cape_cod_prior_algo are missing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cape_cod_method</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                    <span class="n">trend_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">losses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                    <span class="n">development_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply the Cape Cod method to project ultimate claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (float): The current claim amount.</span>
<span class="sd">        exposure (float): The exposure amount.</span>
<span class="sd">        development_factor (float): The development factor to apply.</span>
<span class="sd">        trend_factors (List[float], optional): List of trend factors for each year.</span>
<span class="sd">        losses (List[float], optional): List of losses for each year.</span>
<span class="sd">        development_factors (List[float], optional): List of development factors for each year.</span>
<span class="sd">        exposures (List[float], optional): List of exposures for each year.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The projected ultimate claim amount.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any of the required parameters for cape_cod_prior_algo are missing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If any of the required parameters for cape_cod_prior_algo are missing, raise an error</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">development_factors</span><span class="p">,</span> <span class="n">exposures</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cape Cod method requires trend_factors, losses, development_factors, and exposures&quot;</span><span class="p">)</span>

    <span class="n">cape_cod_prior</span> <span class="o">=</span> <span class="n">cape_cod_prior_algo</span><span class="p">(</span>
        <span class="n">trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span>
        <span class="n">losses</span><span class="o">=</span><span class="n">losses</span><span class="p">,</span>
        <span class="n">development_factors</span><span class="o">=</span><span class="n">development_factors</span><span class="p">,</span>
        <span class="n">exposures</span><span class="o">=</span><span class="n">exposures</span><span class="p">,</span>
        <span class="n">generalised</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">bf_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">,</span> <span class="n">a_priori</span><span class="o">=</span><span class="n">cape_cod_prior</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.burn_cost.cape_cod_prior_algo" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cape_cod_prior_algo</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">development_factors</span><span class="p">,</span> <span class="n">exposures</span><span class="p">,</span> <span class="n">decay_factor</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">generalised</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculate the a priori expected loss ratio using the Cape Cod algorithm.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of trend factors for each year.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>losses</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of losses for each year.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of development factors for each year.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of exposures for each year.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>decay_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decay factor for the generalised method. Defaults to 0.0.</p>
              </div>
            </td>
            <td>
                  <code>0.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>generalised</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the generalised method. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="typing.Any">Any</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Union[Any, float]: The a priori expected loss ratio.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cape_cod_prior_algo</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">losses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">development_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                        <span class="n">exposures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">decay_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">generalised</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">Any</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the a priori expected loss ratio using the Cape Cod algorithm.</span>

<span class="sd">    Args:</span>
<span class="sd">        trend_factors (List[float]): List of trend factors for each year.</span>
<span class="sd">        losses (List[float]): List of losses for each year.</span>
<span class="sd">        development_factors (List[float]): List of development factors for each year.</span>
<span class="sd">        exposures (List[float]): List of exposures for each year.</span>
<span class="sd">        decay_factor (float, optional): Decay factor for the generalised method. Defaults to 0.0.</span>
<span class="sd">        generalised (bool, optional): Whether to use the generalised method. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Union[Any, float]: The a priori expected loss ratio.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">generalised</span><span class="p">:</span>
        <span class="c1"># For the generalized method, we apply a decay factor to give different weights to different years</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">decay_factor</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">))]</span>

        <span class="c1"># Calculate weighted pseudo claims and exposures</span>
        <span class="n">psuedo_claims</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">trend_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">losses</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">development_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">exposures</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">)))</span>
        <span class="n">psuedo_exposures</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">exposures</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">development_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                               <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">exposures</span><span class="p">)))</span>

        <span class="k">return</span> <span class="n">psuedo_claims</span> <span class="o">/</span> <span class="n">psuedo_exposures</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Standard Cape Cod method (already implemented)</span>
        <span class="n">psuedo_claims</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">losses</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">development_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">exposures</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trend_factors</span><span class="p">)))</span>
        <span class="n">psuedo_exposures</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">exposures</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">development_factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                               <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">exposures</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">psuedo_claims</span> <span class="o">/</span> <span class="n">psuedo_exposures</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.burn_cost.chainladder_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">chainladder_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply the Chain Ladder method to project ultimate claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current claim amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The development factor to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The projected ultimate claim amount.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">chainladder_method</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply the Chain Ladder method to project ultimate claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (float): The current claim amount.</span>
<span class="sd">        development_factor (float): The development factor to apply.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The projected ultimate claim amount.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span> <span class="o">*</span> <span class="n">development_factor</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.burn_cost.generalised_cape_cod_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generalised_cape_cod_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">,</span> <span class="n">trend_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">losses</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">development_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exposures</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decay_factor</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply the Generalised Cape Cod method to project ultimate claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current claim amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exposure amount.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The development factor to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of trend factors for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>losses</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of losses for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>development_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of development factors for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of exposures for each year.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>decay_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decay factor for the generalised method. Defaults to 0.0.</p>
              </div>
            </td>
            <td>
                  <code>0.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The projected ultimate claim amount.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the required parameters for cape_cod_prior_algo are missing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\burn_cost.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generalised_cape_cod_method</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                               <span class="n">trend_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">losses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="n">development_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="n">decay_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply the Generalised Cape Cod method to project ultimate claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (float): The current claim amount.</span>
<span class="sd">        exposure (float): The exposure amount.</span>
<span class="sd">        development_factor (float): The development factor to apply.</span>
<span class="sd">        trend_factors (List[float], optional): List of trend factors for each year.</span>
<span class="sd">        losses (List[float], optional): List of losses for each year.</span>
<span class="sd">        development_factors (List[float], optional): List of development factors for each year.</span>
<span class="sd">        exposures (List[float], optional): List of exposures for each year.</span>
<span class="sd">        decay_factor (float, optional): Decay factor for the generalised method. Defaults to 0.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The projected ultimate claim amount.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any of the required parameters for cape_cod_prior_algo are missing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If any of the required parameters for cape_cod_prior_algo are missing, raise an error</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">losses</span><span class="p">,</span> <span class="n">development_factors</span><span class="p">,</span> <span class="n">exposures</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Generalised Cape Cod method requires trend_factors, losses, development_factors, and exposures&quot;</span><span class="p">)</span>

    <span class="n">generalised_cape_cod_prior</span> <span class="o">=</span> <span class="n">cape_cod_prior_algo</span><span class="p">(</span>
        <span class="n">trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span>
        <span class="n">losses</span><span class="o">=</span><span class="n">losses</span><span class="p">,</span>
        <span class="n">development_factors</span><span class="o">=</span><span class="n">development_factors</span><span class="p">,</span>
        <span class="n">exposures</span><span class="o">=</span><span class="n">exposures</span><span class="p">,</span>
        <span class="n">decay_factor</span><span class="o">=</span><span class="n">decay_factor</span><span class="p">,</span>
        <span class="n">generalised</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">bf_method</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">development_factor</span><span class="p">,</span> <span class="n">a_priori</span><span class="o">=</span><span class="n">generalised_cape_cod_prior</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Experience.curve_fitting"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.assess_error_assumptions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assess_error_assumptions</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">num_parameters</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Assesses the error term based on standardized residuals and calculates:
- The proportion of positive standardized residuals.
- The proportion of standardized residuals outside the range (-2, 2).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>actual</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actual observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expected values from the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_parameters</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of parameters in the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing:
- 'proportion_positive': Proportion of positive standardized residuals.
- 'proportion_outside_range': Proportion of standardized residuals outside (-2, 2).
- 'mean_residual': Mean of the standardized residuals.
- 'std_residual': Standard deviation of the standardized residuals.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">assess_error_assumptions</span><span class="p">(</span><span class="n">actual</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">expected</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">num_parameters</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assesses the error term based on standardized residuals and calculates:</span>
<span class="sd">    - The proportion of positive standardized residuals.</span>
<span class="sd">    - The proportion of standardized residuals outside the range (-2, 2).</span>

<span class="sd">    Args:</span>
<span class="sd">        actual (List[float]): The actual observed values.</span>
<span class="sd">        expected (List[float]): The expected values from the model.</span>
<span class="sd">        num_parameters (int): The number of parameters in the model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing:</span>
<span class="sd">            - &#39;proportion_positive&#39;: Proportion of positive standardized residuals.</span>
<span class="sd">            - &#39;proportion_outside_range&#39;: Proportion of standardized residuals outside (-2, 2).</span>
<span class="sd">            - &#39;mean_residual&#39;: Mean of the standardized residuals.</span>
<span class="sd">            - &#39;std_residual&#39;: Standard deviation of the standardized residuals.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate standardized residuals</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">residuals_standardised</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">num_parameters</span><span class="p">)</span>

    <span class="c1"># Proportion of positive standardized residuals</span>
    <span class="n">proportion_positive</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">residuals</span> <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span>

    <span class="c1"># Proportion of standardized residuals outside the range (-2, 2)</span>
    <span class="n">proportion_outside_range</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">residuals</span> <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">2</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span>

    <span class="c1"># Mean and standard deviation of standardized residuals</span>
    <span class="n">mean_residual</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span>
    <span class="n">std_residual</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">((</span><span class="n">r</span> <span class="o">-</span> <span class="n">mean_residual</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">residuals</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">residuals</span><span class="p">))</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;proportion_positive&quot;</span><span class="p">:</span> <span class="n">proportion_positive</span><span class="p">,</span>
        <span class="s2">&quot;proportion_outside_range&quot;</span><span class="p">:</span> <span class="n">proportion_outside_range</span><span class="p">,</span>
        <span class="s2">&quot;mean_residual&quot;</span><span class="p">:</span> <span class="n">mean_residual</span><span class="p">,</span>
        <span class="s2">&quot;std_residual&quot;</span><span class="p">:</span> <span class="n">std_residual</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.exponential_fit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">exponential_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">,</span> <span class="n">time_periods</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Fits an exponential curve to the given age-to-age factors using the model:
rj = exp(a + b * t), where ln(rj) = a + b * t.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>age_to_age_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incremental age-to-age factors (rj).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_periods</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding time periods (t).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[float]: A list containing the parameters [a, b] of the exponential curve.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exponential_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">time_periods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fits an exponential curve to the given age-to-age factors using the model:</span>
<span class="sd">    rj = exp(a + b * t), where ln(rj) = a + b * t.</span>

<span class="sd">    Args:</span>
<span class="sd">        age_to_age_factors (List[float]): The incremental age-to-age factors (rj).</span>
<span class="sd">        time_periods (List[int]): The corresponding time periods (t).</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list containing the parameters [a, b] of the exponential curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ln_rj</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="n">rj</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">rj</span> <span class="ow">in</span> <span class="n">age_to_age_factors</span><span class="p">]</span>
    <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">linear_regression</span><span class="p">(</span><span class="n">time_periods</span><span class="p">,</span> <span class="n">ln_rj</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.inverse_power_fit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">inverse_power_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">,</span> <span class="n">time_periods</span><span class="p">,</span> <span class="n">c_values</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Fits a Sherman Curve (Inverse Power Curve) to the given incremental age-to-age factors using the model:
rj = a * (t + c)^b.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>age_to_age_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incremental age-to-age factors (rj).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_periods</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding time periods (t).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>c_values</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of candidate values for c to test.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[float]: A list containing the parameters [a, b, c] of the Sherman Curve.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">inverse_power_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">time_periods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">c_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fits a Sherman Curve (Inverse Power Curve) to the given incremental age-to-age factors using the model:</span>
<span class="sd">    rj = a * (t + c)^b.</span>

<span class="sd">    Args:</span>
<span class="sd">        age_to_age_factors (List[float]): The incremental age-to-age factors (rj).</span>
<span class="sd">        time_periods (List[int]): The corresponding time periods (t).</span>
<span class="sd">        c_values (List[float]): A list of candidate values for c to test.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list containing the parameters [a, b, c] of the Sherman Curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_standard_error</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">predicted_rj</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="o">*</span> <span class="p">((</span><span class="n">t</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span> <span class="o">**</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_periods</span><span class="p">]</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[(</span><span class="n">rj</span> <span class="o">-</span> <span class="n">pred_rj</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">rj</span><span class="p">,</span> <span class="n">pred_rj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">,</span> <span class="n">predicted_rj</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>

    <span class="n">best_a</span><span class="p">,</span> <span class="n">best_b</span><span class="p">,</span> <span class="n">best_c</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
    <span class="n">min_standard_error</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">c_values</span><span class="p">:</span>
        <span class="n">ln_rj</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="n">rj</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">rj</span> <span class="ow">in</span> <span class="n">age_to_age_factors</span><span class="p">]</span>
        <span class="n">ln_t_plus_c</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="n">t</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_periods</span><span class="p">]</span>
        <span class="n">b</span><span class="p">,</span> <span class="n">ln_a</span> <span class="o">=</span> <span class="n">linear_regression</span><span class="p">(</span><span class="n">ln_t_plus_c</span><span class="p">,</span> <span class="n">ln_rj</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="n">ln_a</span><span class="p">)</span>
        <span class="n">standard_error</span> <span class="o">=</span> <span class="n">calculate_standard_error</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">standard_error</span> <span class="o">&lt;</span> <span class="n">min_standard_error</span><span class="p">:</span>
            <span class="n">min_standard_error</span> <span class="o">=</span> <span class="n">standard_error</span>
            <span class="n">best_a</span><span class="p">,</span> <span class="n">best_b</span><span class="p">,</span> <span class="n">best_c</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">best_a</span><span class="p">,</span> <span class="n">best_b</span><span class="p">,</span> <span class="n">best_c</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.linear_regression" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">linear_regression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Performs linear regression to calculate the slope and intercept.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The independent variable values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dependent variable values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[float, float]: The slope and intercept of the regression line.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">linear_regression</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">y</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs linear regression to calculate the slope and intercept.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (List[float]): The independent variable values.</span>
<span class="sd">        y (List[float]): The dependent variable values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[float, float]: The slope and intercept of the regression line.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mean_x</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">mean_y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="n">numerator</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">xi</span> <span class="o">-</span> <span class="n">mean_x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">yi</span> <span class="o">-</span> <span class="n">mean_y</span><span class="p">)</span> <span class="k">for</span> <span class="n">xi</span><span class="p">,</span> <span class="n">yi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">denominator</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">xi</span> <span class="o">-</span> <span class="n">mean_x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">xi</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>

    <span class="n">slope</span> <span class="o">=</span> <span class="n">numerator</span> <span class="o">/</span> <span class="n">denominator</span>
    <span class="n">intercept</span> <span class="o">=</span> <span class="n">mean_y</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">mean_x</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.power_fit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">power_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">,</span> <span class="n">time_periods</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Fits a power curve to the given cumulative age-to-age factors using the model:
Rj = a * (b^t), where ln(ln(Rj)) = ln(ln(a)) + (ln(b) * t).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>age_to_age_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cumulative age-to-age factors (Rj).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_periods</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding time periods (t).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[float]: A list containing the parameters [a, b] of the power curve.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">power_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">time_periods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fits a power curve to the given cumulative age-to-age factors using the model:</span>
<span class="sd">    Rj = a * (b^t), where ln(ln(Rj)) = ln(ln(a)) + (ln(b) * t).</span>

<span class="sd">    Args:</span>
<span class="sd">        age_to_age_factors (List[float]): The cumulative age-to-age factors (Rj).</span>
<span class="sd">        time_periods (List[int]): The corresponding time periods (t).</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list containing the parameters [a, b] of the power curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ln_ln_Rj</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">Rj</span><span class="p">))</span> <span class="k">for</span> <span class="n">Rj</span> <span class="ow">in</span> <span class="n">age_to_age_factors</span><span class="p">]</span>
    <span class="n">ln_b</span><span class="p">,</span> <span class="n">ln_ln_a</span> <span class="o">=</span> <span class="n">linear_regression</span><span class="p">(</span><span class="n">time_periods</span><span class="p">,</span> <span class="n">ln_ln_Rj</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">ln_ln_a</span><span class="p">))</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="n">ln_b</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.r_squared" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">r_squared</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the R-squared (coefficient of determination) value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>actual</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actual observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expected values from the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The R-squared value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">r_squared</span><span class="p">(</span><span class="n">actual</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">expected</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the R-squared (coefficient of determination) value.</span>

<span class="sd">    Args:</span>
<span class="sd">        actual (List[float]): The actual observed values.</span>
<span class="sd">        expected (List[float]): The expected values from the model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The R-squared value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate the total sum of squares (TSS)</span>
    <span class="n">mean_actual</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
    <span class="n">total_sum_of_squares</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">mean_actual</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actual</span><span class="p">)</span>

    <span class="c1"># Calculate the residual sum of squares (RSS)</span>
    <span class="n">residual_sum_of_squares</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">e</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">))</span>

    <span class="c1"># Calculate R-squared</span>
    <span class="n">r_squared_value</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">residual_sum_of_squares</span> <span class="o">/</span> <span class="n">total_sum_of_squares</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">r_squared_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Experience.curve_fitting.weibull_fit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weibull_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">,</span> <span class="n">time_periods</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Fits a Weibull curve to the given cumulative age-to-age factors using the model:
Rj = 1 / (1 - exp(-a * t^b)).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>age_to_age_factors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cumulative age-to-age factors (Rj).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_periods</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding time periods (t).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[float]: A list containing the parameters [a, b] of the Weibull curve.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\curve_fitting.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">weibull_fit</span><span class="p">(</span><span class="n">age_to_age_factors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">time_periods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fits a Weibull curve to the given cumulative age-to-age factors using the model:</span>
<span class="sd">    Rj = 1 / (1 - exp(-a * t^b)).</span>

<span class="sd">    Args:</span>
<span class="sd">        age_to_age_factors (List[float]): The cumulative age-to-age factors (Rj).</span>
<span class="sd">        time_periods (List[int]): The corresponding time periods (t).</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list containing the parameters [a, b] of the Weibull curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">transformed_Rj</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="o">-</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">Rj</span><span class="p">))</span> <span class="k">for</span> <span class="n">Rj</span> <span class="ow">in</span> <span class="n">age_to_age_factors</span><span class="p">]</span>
    <span class="n">ln_t</span> <span class="o">=</span> <span class="p">[</span><span class="n">log</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_periods</span><span class="p">]</span>
    <span class="n">b</span><span class="p">,</span> <span class="n">ln_a</span> <span class="o">=</span> <span class="n">linear_regression</span><span class="p">(</span><span class="n">ln_t</span><span class="p">,</span> <span class="n">transformed_Rj</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="n">ln_a</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Experience.frequency_severity"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.Experience.frequency_severity.severity_fit" class="doc doc-heading">
            <code>severity_fit</code>


</h2>


    <div class="doc doc-contents ">








              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\Experience\frequency_severity.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">severity_fit</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distributions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SeverityDistribution</span><span class="p">],</span> <span class="n">data</span> <span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> <span class="n">ibner_dev_pattern</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">ground_up</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ground_up_model</span> <span class="o">=</span> <span class="n">ground_up</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ibner_dev_pattern</span> <span class="o">=</span> <span class="n">ibner_dev_pattern</span> <span class="c1"># could pass IBNERPatternExtractor().getIBNERPATTERN as outputs Dict[int,float] if needed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distributions</span> <span class="o">=</span> <span class="n">distributions</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_inidividual_projected_claims</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ground_up_model</span><span class="p">:</span> 
            <span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">capped_claim_development_history</span><span class="o">.</span><span class="n">latest_incurred</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ibner_dev_pattern</span><span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">claims_meta_data</span><span class="o">.</span><span class="n">modelling_year</span><span class="p">]</span> <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">trended_claims</span><span class="o">.</span><span class="n">claims</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;non groud up fitting hasn&#39;t been implemented yet&quot;</span><span class="p">)</span> 


    <span class="k">def</span><span class="w"> </span><span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fit the severity distribution to the data.</span>
<span class="sd">        This method should implement the logic to fit the specified severity distributions</span>
<span class="sd">        to the data provided in the ExperienceModelData instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inidividual_projected_claims</span> 
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pyre.Models.Experience.frequency_severity.severity_fit.fit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fit</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Fit the severity distribution to the data.
This method should implement the logic to fit the specified severity distributions
to the data provided in the ExperienceModelData instance.</p>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\frequency_severity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fit the severity distribution to the data.</span>
<span class="sd">    This method should implement the logic to fit the specified severity distributions</span>
<span class="sd">    to the data provided in the ExperienceModelData instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inidividual_projected_claims</span> 
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Experience.pareto_rating"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Experience.resampling"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.Experience.resampling.resampling" class="doc doc-heading">
            <code>resampling</code>


</h2>


    <div class="doc doc-contents ">


        <p>A class for resampling claims data from an ExperienceModelData object.</p>
<p>This class provides functionality to randomly select claims from a set of trended claims
for the purpose of simulation or bootstrapping analysis. It uses the random.choice function
to select individual claims from the trended claims data.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.Experience.resampling.resampling._claims">_claims</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection of trended claims from the ExperienceModelData object.
    These are claims that have been adjusted to the contract inception year.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>Future enhancements planned include support for different return periods and
more sophisticated resampling methods. The implementation relies on the Claims
class having an iterator method to work with the random.choice function.</p>
</details>






              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\Experience\resampling.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">resampling</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for resampling claims data from an ExperienceModelData object.</span>

<span class="sd">    This class provides functionality to randomly select claims from a set of trended claims</span>
<span class="sd">    for the purpose of simulation or bootstrapping analysis. It uses the random.choice function</span>
<span class="sd">    to select individual claims from the trended claims data.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        _claims: A collection of trended claims from the ExperienceModelData object.</span>
<span class="sd">                These are claims that have been adjusted to the contract inception year.</span>

<span class="sd">    Note:</span>
<span class="sd">        Future enhancements planned include support for different return periods and</span>
<span class="sd">        more sophisticated resampling methods. The implementation relies on the Claims</span>
<span class="sd">        class having an iterator method to work with the random.choice function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claims</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the resampling class with claims data.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            claims (ExperienceModelData): An ExperienceModelData object containing the claims</span>
<span class="sd">                                         to be resampled. The trended_claims property of this</span>
<span class="sd">                                         object will be used for resampling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_claims</span> <span class="o">=</span> <span class="n">ExperienceModelData</span><span class="o">.</span><span class="n">trended_claims</span> <span class="c1">#trended loss prior to subject losses</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">resample</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Randomly select a claim from the collection of trended claims.</span>

<span class="sd">        This method uses the random.choice function to select a single claim</span>
<span class="sd">        from the trended claims data. Currently, it doesn&#39;t return the selected</span>
<span class="sd">        claim but this behavior may change in future implementations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None: Currently doesn&#39;t return anything, but may be updated to return</span>
<span class="sd">                 the selected claim in future implementations.</span>

<span class="sd">        Note:</span>
<span class="sd">            Future enhancements will include support for different return periods</span>
<span class="sd">            and more sophisticated resampling methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_claims</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pyre.Models.Experience.resampling.resampling.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">claims</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the resampling class with claims data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>claims</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An ExperienceModelData object containing the claims
                         to be resampled. The trended_claims property of this
                         object will be used for resampling.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\resampling.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claims</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the resampling class with claims data.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        claims (ExperienceModelData): An ExperienceModelData object containing the claims</span>
<span class="sd">                                     to be resampled. The trended_claims property of this</span>
<span class="sd">                                     object will be used for resampling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_claims</span> <span class="o">=</span> <span class="n">ExperienceModelData</span><span class="o">.</span><span class="n">trended_claims</span> <span class="c1">#trended loss prior to subject losses</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.Experience.resampling.resampling.resample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">resample</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Randomly select a claim from the collection of trended claims.</p>
<p>This method uses the random.choice function to select a single claim
from the trended claims data. Currently, it doesn't return the selected
claim but this behavior may change in future implementations.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>None</code></td>            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Currently doesn't return anything, but may be updated to return
 the selected claim in future implementations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>Future enhancements will include support for different return periods
and more sophisticated resampling methods.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Experience\resampling.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resample</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly select a claim from the collection of trended claims.</span>

<span class="sd">    This method uses the random.choice function to select a single claim</span>
<span class="sd">    from the trended claims data. Currently, it doesn&#39;t return the selected</span>
<span class="sd">    claim but this behavior may change in future implementations.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None: Currently doesn&#39;t return anything, but may be updated to return</span>
<span class="sd">             the selected claim in future implementations.</span>

<span class="sd">    Note:</span>
<span class="sd">        Future enhancements will include support for different return periods</span>
<span class="sd">        and more sophisticated resampling methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_claims</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Exposure.mbbefd"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.Exposure.mbbefd.swissRe_c_values" class="doc doc-heading">
            <code>swissRe_c_values</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p><em>summary</em>
https://www.swissre.com/dam/jcr:7137dac0-83a6-4cfa-80a4-93d33c35562f/exposure-rating-brochure.pdf</p>







              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\Exposure\mbbefd.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">swissRe_c_values</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>
<span class="sd">    https://www.swissre.com/dam/jcr:7137dac0-83a6-4cfa-80a4-93d33c35562f/exposure-rating-brochure.pdf</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">PERSONAL_LINES</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">COMMERCIAL_LINES_SMALL</span> <span class="o">=</span> <span class="mf">2.0</span>
    <span class="n">COMMERCIAL_LINES_MEDIUM</span> <span class="o">=</span> <span class="mf">3.0</span>
    <span class="n">CAPTIVE_BI</span> <span class="o">=</span> <span class="mf">2.1</span>
    <span class="n">CAPTIVE_PD</span> <span class="o">=</span> <span class="mf">3.8</span>
    <span class="n">CAPTIVE_BI_PD</span> <span class="o">=</span> <span class="mf">3.4</span>
    <span class="n">INDUSTRIAL_LARGE_COMMERCIAL</span> <span class="o">=</span> <span class="mf">4.0</span>
    <span class="n">LLOYDS_INDUSTRY</span> <span class="o">=</span> <span class="mf">5.0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Exposure.mbbefd.mbbefd_curve" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mbbefd_curve</span><span class="p">(</span><span class="n">swissRe_c_values</span><span class="p">,</span> <span class="n">curve_position</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p><em>summary</em></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>swissRe_c_values</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="swissRe_c_values (pyre.Models.Exposure.mbbefd.swissRe_c_values)" href="#pyre.Models.Exposure.mbbefd.swissRe_c_values">swissRe_c_values</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>curve_position</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Exposure\mbbefd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">mbbefd_curve</span><span class="p">(</span><span class="n">swissRe_c_values</span><span class="p">:</span> <span class="n">swissRe_c_values</span><span class="p">,</span> <span class="n">curve_position</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>

<span class="sd">    Args:</span>
<span class="sd">        swissRe_c_values (swissRe_c_values): _description_</span>
<span class="sd">        curve_position (float): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="mf">3.1</span> <span class="o">-</span> <span class="mf">0.15</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">swissRe_c_values</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">swissRe_c_values</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">exp</span><span class="p">((</span><span class="mf">0.78</span> <span class="o">+</span> <span class="mf">0.12</span> <span class="o">*</span> <span class="n">swissRe_c_values</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">swissRe_c_values</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">log</span><span class="p">(((</span><span class="n">g</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">g</span><span class="p">)</span> <span class="o">*</span> <span class="n">b</span> <span class="o">**</span> <span class="n">curve_position</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">b</span><span class="p">))</span> <span class="o">/</span> <span class="n">log</span><span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">g</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Exposure.mixed_exponential"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Exposure.mixed_exponential.mixed_exponential_curve" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mixed_exponential_curve</span><span class="p">(</span><span class="n">paramaters_mus</span><span class="p">,</span> <span class="n">parameter_weights</span><span class="p">,</span> <span class="n">curve_position_value</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p><em>summary</em></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>paramaters_mus</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parameter_weights</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>curve_position_value</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Exposure\mixed_exponential.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">mixed_exponential_curve</span><span class="p">(</span><span class="n">paramaters_mus</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">parameter_weights</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">curve_position_value</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>

<span class="sd">    Args:</span>
<span class="sd">        paramaters_mus (list[float]): _description_</span>
<span class="sd">        parameter_weights (list[float]): _description_</span>
<span class="sd">        curve_position_value (float): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_limited_severity</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">paramaters_mus</span><span class="p">,</span> <span class="n">parameter_weights</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mu</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  
            <span class="n">contributing_limiting_severity</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">exp</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span> <span class="o">/</span> <span class="n">mu</span><span class="p">)</span> <span class="o">*</span> <span class="n">curve_position_value</span><span class="p">))</span> <span class="o">*</span> <span class="n">mu</span>
            <span class="n">total_limited_severity</span> <span class="o">+=</span> <span class="n">contributing_limiting_severity</span> <span class="o">*</span> <span class="n">weight</span>
    <span class="k">return</span> <span class="n">total_limited_severity</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Exposure.pareto_ilf"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.Exposure.riebesell"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="pyre.Models.Exposure.riebesell.riebesell_curve" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">riebesell_curve</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">z_value</span><span class="p">,</span> <span class="n">base_limit</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p><em>summary</em></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>attachment</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>limit</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_value</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_limit</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>_type_</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\Exposure\riebesell.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">riebesell_curve</span><span class="p">(</span><span class="n">attachment</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">z_value</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">base_limit</span><span class="p">:</span><span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>

<span class="sd">    Args:</span>
<span class="sd">        attachment (float): _description_</span>
<span class="sd">        limit (float): _description_</span>
<span class="sd">        z_value (float): _description_</span>
<span class="sd">        base_limit (float): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">attachment</span><span class="p">)</span> <span class="o">/</span> <span class="n">base_limit</span><span class="p">)</span> <span class="o">**</span> <span class="n">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">z_value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">attachment</span> <span class="o">+</span> <span class="n">limit</span><span class="p">)</span> <span class="o">/</span> <span class="n">base_limit</span><span class="p">)</span> <span class="o">**</span> <span class="n">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">z_value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.AggregateFeatures.aggregate_features"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.AggregateFeatures.selections"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight" class="doc doc-heading">
            <code>CredibilityWeight</code>


</h2>


    <div class="doc doc-contents ">








              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CredibilityWeight</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">:</span> <span class="n">ExposureModelData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the CredibilityWeight class with experience and exposure data.</span>

<span class="sd">        Args:</span>
<span class="sd">            experience_data: Experience model data containing claims and exposures</span>
<span class="sd">            exposure_data: Exposure model data containing exposures</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span> <span class="o">=</span> <span class="n">experience_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exposure_data</span> <span class="o">=</span> <span class="n">exposure_data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_sample_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the sample variance of a list of data points.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: List of observed values</span>

<span class="sd">        Returns:</span>
<span class="sd">            Sample variance of the data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">variance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Using n-1 for sample variance</span>

        <span class="k">return</span> <span class="n">variance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_data_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sample&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the variance of data using different methods.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: List of observed values</span>
<span class="sd">            method: Method to use for variance calculation:</span>
<span class="sd">                   &quot;sample&quot; - standard sample variance</span>
<span class="sd">                   &quot;population&quot; - population variance</span>
<span class="sd">                   &quot;process&quot; - estimate of process variance for credibility</span>

<span class="sd">        Returns:</span>
<span class="sd">            Variance of the data based on the specified method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;sample&quot;</span><span class="p">:</span>
            <span class="c1"># Sample variance (unbiased estimator)</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span>
            <span class="c1"># Population variance</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;process&quot;</span><span class="p">:</span>
            <span class="c1"># Process variance estimate for credibility calculations</span>
            <span class="c1"># This is often the within-variance component</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid variance calculation method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">estimate_process_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_by_group</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimate the process variance (within variance) from grouped data.</span>
<span class="sd">        This is useful for Bühlmann and Bühlmann-Straub credibility methods.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_by_group: Dictionary mapping group identifiers to lists of observed values</span>

<span class="sd">        Returns:</span>
<span class="sd">            Estimated process variance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data_by_group</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">total_variance</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">total_weight</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Calculate within-group variance</span>
            <span class="n">group_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">group_variance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">group_mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

            <span class="c1"># Weight by group size</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">total_variance</span> <span class="o">+=</span> <span class="n">group_variance</span> <span class="o">*</span> <span class="n">weight</span>
            <span class="n">total_weight</span> <span class="o">+=</span> <span class="n">weight</span>

        <span class="k">if</span> <span class="n">total_weight</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="n">total_variance</span> <span class="o">/</span> <span class="n">total_weight</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_by_group</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimate the variance of hypothetical means (between variance) from grouped data.</span>
<span class="sd">        This is useful for Bühlmann and Bühlmann-Straub credibility methods.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_by_group: Dictionary mapping group identifiers to lists of observed values</span>

<span class="sd">        Returns:</span>
<span class="sd">            Estimated variance of hypothetical means</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data_by_group</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Calculate overall mean</span>
        <span class="n">all_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">all_values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_values</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">overall_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span>

        <span class="c1"># Calculate group means</span>
        <span class="n">group_means</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">group_sizes</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">group_means</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">group_sizes</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="c1"># Calculate variance of group means</span>
        <span class="n">weighted_sum_squared_diff</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">total_weight</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">mean</span> <span class="ow">in</span> <span class="n">group_means</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="n">group_sizes</span><span class="p">[</span><span class="n">group</span><span class="p">]</span>
            <span class="n">weighted_sum_squared_diff</span> <span class="o">+=</span> <span class="n">weight</span> <span class="o">*</span> <span class="p">((</span><span class="n">mean</span> <span class="o">-</span> <span class="n">overall_mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">total_weight</span> <span class="o">+=</span> <span class="n">weight</span>

        <span class="k">if</span> <span class="n">total_weight</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Calculate raw between variance</span>
        <span class="n">raw_between_variance</span> <span class="o">=</span> <span class="n">weighted_sum_squared_diff</span> <span class="o">/</span> <span class="n">total_weight</span>

        <span class="c1"># Adjust for within-group variance</span>
        <span class="n">process_variance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

        <span class="c1"># Calculate average group size</span>
        <span class="n">avg_group_size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">group_sizes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_sizes</span><span class="p">)</span> <span class="k">if</span> <span class="n">group_sizes</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="c1"># Adjust between variance by removing the expected contribution from process variance</span>
        <span class="n">adjusted_between_variance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">raw_between_variance</span> <span class="o">-</span> <span class="p">(</span><span class="n">process_variance</span> <span class="o">/</span> <span class="n">avg_group_size</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">adjusted_between_variance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">limited_fluctuation_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claim_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">full_credibility_standard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1082</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate credibility using the Limited Fluctuation (Classical) Credibility method.</span>
<span class="sd">        Based on the formula Z = min(sqrt(n/n_full), 1) where n_full is the full credibility standard.</span>

<span class="sd">        The default full_credibility_standard of 1082 corresponds to a 95% confidence level</span>
<span class="sd">        with a 5% margin of error assuming a Poisson frequency process.</span>

<span class="sd">        Args:</span>
<span class="sd">            claim_count: Number of claims</span>
<span class="sd">            full_credibility_standard: Number of claims needed for full credibility</span>

<span class="sd">        Returns:</span>
<span class="sd">            Credibility factor between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">claim_count</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">full_credibility_standard</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">credibility</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">claim_count</span> <span class="o">/</span> <span class="n">full_credibility_standard</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">buhlmann_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claim_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">expected_process_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                             <span class="n">variance_of_hypothetical_means</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate credibility using the Bühlmann Credibility method.</span>
<span class="sd">        Based on the formula Z = n / (n + k) where k = EPV / VHM.</span>

<span class="sd">        Args:</span>
<span class="sd">            claim_count: Number of claims</span>
<span class="sd">            expected_process_variance: Expected value of the process variance (EPV)</span>
<span class="sd">            variance_of_hypothetical_means: Variance of the hypothetical means (VHM)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Credibility factor between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">claim_count</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">expected_process_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">variance_of_hypothetical_means</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">k</span> <span class="o">=</span> <span class="n">expected_process_variance</span> <span class="o">/</span> <span class="n">variance_of_hypothetical_means</span>
        <span class="n">credibility</span> <span class="o">=</span> <span class="n">claim_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">claim_count</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">buhlmann_straub_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">claim_counts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> 
                                   <span class="n">expected_process_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                                   <span class="n">variance_of_hypothetical_means</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate credibility using the Bühlmann-Straub Credibility method.</span>
<span class="sd">        This extends the Bühlmann method to account for varying exposure sizes.</span>

<span class="sd">        Args:</span>
<span class="sd">            exposures: List of exposure values</span>
<span class="sd">            claim_counts: List of claim counts corresponding to each exposure</span>
<span class="sd">            expected_process_variance: Expected value of the process variance (EPV)</span>
<span class="sd">            variance_of_hypothetical_means: Variance of the hypothetical means (VHM)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Credibility factor between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exposures</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">claim_counts</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">claim_counts</span><span class="p">):</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="k">if</span> <span class="n">expected_process_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">variance_of_hypothetical_means</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">total_exposure</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">total_exposure</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">k</span> <span class="o">=</span> <span class="n">expected_process_variance</span> <span class="o">/</span> <span class="n">variance_of_hypothetical_means</span>
        <span class="n">credibility</span> <span class="o">=</span> <span class="n">total_exposure</span> <span class="o">/</span> <span class="p">(</span><span class="n">total_exposure</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">greatest_accuracy_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">collective_mean</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate credibility using the Greatest Accuracy Credibility method.</span>
<span class="sd">        This method aims to minimize the mean squared error.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: List of observed values</span>
<span class="sd">            collective_mean: The collective mean (a priori estimate)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Credibility factor between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">collective_mean</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Calculate individual mean and variance</span>
        <span class="n">individual_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">individual_mean</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Use the helper function to calculate variance</span>
        <span class="n">individual_variance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_data_variance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;population&quot;</span><span class="p">)</span>

        <span class="c1"># Calculate between variance (estimate of variance of hypothetical means)</span>
        <span class="n">between_variance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">individual_variance</span> <span class="o">-</span> <span class="p">(</span><span class="n">collective_mean</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

        <span class="c1"># Calculate credibility</span>
        <span class="k">if</span> <span class="n">between_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">credibility</span> <span class="o">=</span> <span class="n">between_variance</span> <span class="o">/</span> <span class="p">(</span><span class="n">between_variance</span> <span class="o">+</span> <span class="p">(</span><span class="n">individual_variance</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bayesian_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prior_mean</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">prior_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                            <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">data_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate credibility using Bayesian Credibility approach.</span>

<span class="sd">        Args:</span>
<span class="sd">            prior_mean: Mean of the prior distribution</span>
<span class="sd">            prior_variance: Variance of the prior distribution</span>
<span class="sd">            data: List of observed values</span>
<span class="sd">            data_variance: Variance of the data</span>

<span class="sd">        Returns:</span>
<span class="sd">            Credibility factor between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">prior_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">data_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Bayesian credibility formula</span>
        <span class="n">credibility</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">prior_variance</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">prior_variance</span> <span class="o">+</span> <span class="n">data_variance</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">experience_data</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the CredibilityWeight class with experience and exposure data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>experience_data</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Experience model data containing claims and exposures</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure_data</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Exposure.exposure_preparer.ExposureModelData">ExposureModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exposure model data containing exposures</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">:</span> <span class="n">ExposureModelData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the CredibilityWeight class with experience and exposure data.</span>

<span class="sd">    Args:</span>
<span class="sd">        experience_data: Experience model data containing claims and exposures</span>
<span class="sd">        exposure_data: Exposure model data containing exposures</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span> <span class="o">=</span> <span class="n">experience_data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exposure_data</span> <span class="o">=</span> <span class="n">exposure_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.bayesian_credibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bayesian_credibility</span><span class="p">(</span><span class="n">prior_mean</span><span class="p">,</span> <span class="n">prior_variance</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data_variance</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate credibility using Bayesian Credibility approach.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>prior_mean</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mean of the prior distribution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prior_variance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance of the prior distribution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_variance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance of the data</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility factor between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bayesian_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prior_mean</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">prior_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                        <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">data_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate credibility using Bayesian Credibility approach.</span>

<span class="sd">    Args:</span>
<span class="sd">        prior_mean: Mean of the prior distribution</span>
<span class="sd">        prior_variance: Variance of the prior distribution</span>
<span class="sd">        data: List of observed values</span>
<span class="sd">        data_variance: Variance of the data</span>

<span class="sd">    Returns:</span>
<span class="sd">        Credibility factor between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">prior_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">data_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Bayesian credibility formula</span>
    <span class="n">credibility</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">prior_variance</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">prior_variance</span> <span class="o">+</span> <span class="n">data_variance</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_credibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">buhlmann_credibility</span><span class="p">(</span><span class="n">claim_count</span><span class="p">,</span> <span class="n">expected_process_variance</span><span class="p">,</span> <span class="n">variance_of_hypothetical_means</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate credibility using the Bühlmann Credibility method.
Based on the formula Z = n / (n + k) where k = EPV / VHM.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>claim_count</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of claims</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected_process_variance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected value of the process variance (EPV)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variance_of_hypothetical_means</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance of the hypothetical means (VHM)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility factor between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">buhlmann_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claim_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">expected_process_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                         <span class="n">variance_of_hypothetical_means</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate credibility using the Bühlmann Credibility method.</span>
<span class="sd">    Based on the formula Z = n / (n + k) where k = EPV / VHM.</span>

<span class="sd">    Args:</span>
<span class="sd">        claim_count: Number of claims</span>
<span class="sd">        expected_process_variance: Expected value of the process variance (EPV)</span>
<span class="sd">        variance_of_hypothetical_means: Variance of the hypothetical means (VHM)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Credibility factor between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">claim_count</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">expected_process_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">variance_of_hypothetical_means</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">k</span> <span class="o">=</span> <span class="n">expected_process_variance</span> <span class="o">/</span> <span class="n">variance_of_hypothetical_means</span>
    <span class="n">credibility</span> <span class="o">=</span> <span class="n">claim_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">claim_count</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.buhlmann_straub_credibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">buhlmann_straub_credibility</span><span class="p">(</span><span class="n">exposures</span><span class="p">,</span> <span class="n">claim_counts</span><span class="p">,</span> <span class="n">expected_process_variance</span><span class="p">,</span> <span class="n">variance_of_hypothetical_means</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate credibility using the Bühlmann-Straub Credibility method.
This extends the Bühlmann method to account for varying exposure sizes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of exposure values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>claim_counts</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of claim counts corresponding to each exposure</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expected_process_variance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected value of the process variance (EPV)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variance_of_hypothetical_means</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance of the hypothetical means (VHM)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility factor between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">buhlmann_straub_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">claim_counts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> 
                               <span class="n">expected_process_variance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                               <span class="n">variance_of_hypothetical_means</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate credibility using the Bühlmann-Straub Credibility method.</span>
<span class="sd">    This extends the Bühlmann method to account for varying exposure sizes.</span>

<span class="sd">    Args:</span>
<span class="sd">        exposures: List of exposure values</span>
<span class="sd">        claim_counts: List of claim counts corresponding to each exposure</span>
<span class="sd">        expected_process_variance: Expected value of the process variance (EPV)</span>
<span class="sd">        variance_of_hypothetical_means: Variance of the hypothetical means (VHM)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Credibility factor between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exposures</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">claim_counts</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">claim_counts</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="k">if</span> <span class="n">expected_process_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">variance_of_hypothetical_means</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">total_exposure</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">total_exposure</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">k</span> <span class="o">=</span> <span class="n">expected_process_variance</span> <span class="o">/</span> <span class="n">variance_of_hypothetical_means</span>
    <span class="n">credibility</span> <span class="o">=</span> <span class="n">total_exposure</span> <span class="o">/</span> <span class="p">(</span><span class="n">total_exposure</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_data_variance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_data_variance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the variance of data using different methods.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Method to use for variance calculation:
   "sample" - standard sample variance
   "population" - population variance
   "process" - estimate of process variance for credibility</p>
              </div>
            </td>
            <td>
                  <code>&#39;sample&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance of the data based on the specified method</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_data_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sample&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the variance of data using different methods.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: List of observed values</span>
<span class="sd">        method: Method to use for variance calculation:</span>
<span class="sd">               &quot;sample&quot; - standard sample variance</span>
<span class="sd">               &quot;population&quot; - population variance</span>
<span class="sd">               &quot;process&quot; - estimate of process variance for credibility</span>

<span class="sd">    Returns:</span>
<span class="sd">        Variance of the data based on the specified method</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;sample&quot;</span><span class="p">:</span>
        <span class="c1"># Sample variance (unbiased estimator)</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;population&quot;</span><span class="p">:</span>
        <span class="c1"># Population variance</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;process&quot;</span><span class="p">:</span>
        <span class="c1"># Process variance estimate for credibility calculations</span>
        <span class="c1"># This is often the within-variance component</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid variance calculation method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.calculate_sample_variance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_sample_variance</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the sample variance of a list of data points.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Sample variance of the data</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_sample_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the sample variance of a list of data points.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: List of observed values</span>

<span class="sd">    Returns:</span>
<span class="sd">        Sample variance of the data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">variance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Using n-1 for sample variance</span>

    <span class="k">return</span> <span class="n">variance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_process_variance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Estimate the process variance (within variance) from grouped data.
This is useful for Bühlmann and Bühlmann-Straub credibility methods.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_by_group</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="typing.Any">Any</span>, <span title="typing.List">List</span>[<span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping group identifiers to lists of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated process variance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">estimate_process_variance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_by_group</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Estimate the process variance (within variance) from grouped data.</span>
<span class="sd">    This is useful for Bühlmann and Bühlmann-Straub credibility methods.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_by_group: Dictionary mapping group identifiers to lists of observed values</span>

<span class="sd">    Returns:</span>
<span class="sd">        Estimated process variance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data_by_group</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">total_variance</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">total_weight</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># Calculate within-group variance</span>
        <span class="n">group_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">group_variance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">group_mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="c1"># Weight by group size</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">total_variance</span> <span class="o">+=</span> <span class="n">group_variance</span> <span class="o">*</span> <span class="n">weight</span>
        <span class="n">total_weight</span> <span class="o">+=</span> <span class="n">weight</span>

    <span class="k">if</span> <span class="n">total_weight</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="k">return</span> <span class="n">total_variance</span> <span class="o">/</span> <span class="n">total_weight</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.estimate_variance_of_hypothetical_means" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Estimate the variance of hypothetical means (between variance) from grouped data.
This is useful for Bühlmann and Bühlmann-Straub credibility methods.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_by_group</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="typing.Any">Any</span>, <span title="typing.List">List</span>[<span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping group identifiers to lists of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated variance of hypothetical means</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_by_group</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Estimate the variance of hypothetical means (between variance) from grouped data.</span>
<span class="sd">    This is useful for Bühlmann and Bühlmann-Straub credibility methods.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_by_group: Dictionary mapping group identifiers to lists of observed values</span>

<span class="sd">    Returns:</span>
<span class="sd">        Estimated variance of hypothetical means</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data_by_group</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Calculate overall mean</span>
    <span class="n">all_values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">all_values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">all_values</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">overall_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span>

    <span class="c1"># Calculate group means</span>
    <span class="n">group_means</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">group_sizes</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data_by_group</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">group_means</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">group_sizes</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="c1"># Calculate variance of group means</span>
    <span class="n">weighted_sum_squared_diff</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">total_weight</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">mean</span> <span class="ow">in</span> <span class="n">group_means</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="n">group_sizes</span><span class="p">[</span><span class="n">group</span><span class="p">]</span>
        <span class="n">weighted_sum_squared_diff</span> <span class="o">+=</span> <span class="n">weight</span> <span class="o">*</span> <span class="p">((</span><span class="n">mean</span> <span class="o">-</span> <span class="n">overall_mean</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">total_weight</span> <span class="o">+=</span> <span class="n">weight</span>

    <span class="k">if</span> <span class="n">total_weight</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Calculate raw between variance</span>
    <span class="n">raw_between_variance</span> <span class="o">=</span> <span class="n">weighted_sum_squared_diff</span> <span class="o">/</span> <span class="n">total_weight</span>

    <span class="c1"># Adjust for within-group variance</span>
    <span class="n">process_variance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

    <span class="c1"># Calculate average group size</span>
    <span class="n">avg_group_size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">group_sizes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_sizes</span><span class="p">)</span> <span class="k">if</span> <span class="n">group_sizes</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="c1"># Adjust between variance by removing the expected contribution from process variance</span>
    <span class="n">adjusted_between_variance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">raw_between_variance</span> <span class="o">-</span> <span class="p">(</span><span class="n">process_variance</span> <span class="o">/</span> <span class="n">avg_group_size</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">adjusted_between_variance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.greatest_accuracy_credibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">greatest_accuracy_credibility</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">collective_mean</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate credibility using the Greatest Accuracy Credibility method.
This method aims to minimize the mean squared error.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of observed values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>collective_mean</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The collective mean (a priori estimate)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility factor between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">greatest_accuracy_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">collective_mean</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate credibility using the Greatest Accuracy Credibility method.</span>
<span class="sd">    This method aims to minimize the mean squared error.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: List of observed values</span>
<span class="sd">        collective_mean: The collective mean (a priori estimate)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Credibility factor between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">collective_mean</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Calculate individual mean and variance</span>
    <span class="n">individual_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">individual_mean</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Use the helper function to calculate variance</span>
    <span class="n">individual_variance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_data_variance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;population&quot;</span><span class="p">)</span>

    <span class="c1"># Calculate between variance (estimate of variance of hypothetical means)</span>
    <span class="n">between_variance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">individual_variance</span> <span class="o">-</span> <span class="p">(</span><span class="n">collective_mean</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

    <span class="c1"># Calculate credibility</span>
    <span class="k">if</span> <span class="n">between_variance</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">credibility</span> <span class="o">=</span> <span class="n">between_variance</span> <span class="o">/</span> <span class="p">(</span><span class="n">between_variance</span> <span class="o">+</span> <span class="p">(</span><span class="n">individual_variance</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.CredibilityWeight.limited_fluctuation_credibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">limited_fluctuation_credibility</span><span class="p">(</span><span class="n">claim_count</span><span class="p">,</span> <span class="n">full_credibility_standard</span><span class="o">=</span><span class="mi">1082</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate credibility using the Limited Fluctuation (Classical) Credibility method.
Based on the formula Z = min(sqrt(n/n_full), 1) where n_full is the full credibility standard.</p>
<p>The default full_credibility_standard of 1082 corresponds to a 95% confidence level
with a 5% margin of error assuming a Poisson frequency process.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>claim_count</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of claims</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>full_credibility_standard</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of claims needed for full credibility</p>
              </div>
            </td>
            <td>
                  <code>1082</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility factor between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">limited_fluctuation_credibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claim_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">full_credibility_standard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1082</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate credibility using the Limited Fluctuation (Classical) Credibility method.</span>
<span class="sd">    Based on the formula Z = min(sqrt(n/n_full), 1) where n_full is the full credibility standard.</span>

<span class="sd">    The default full_credibility_standard of 1082 corresponds to a 95% confidence level</span>
<span class="sd">    with a 5% margin of error assuming a Poisson frequency process.</span>

<span class="sd">    Args:</span>
<span class="sd">        claim_count: Number of claims</span>
<span class="sd">        full_credibility_standard: Number of claims needed for full credibility</span>

<span class="sd">    Returns:</span>
<span class="sd">        Credibility factor between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">claim_count</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">full_credibility_standard</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">credibility</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">claim_count</span> <span class="o">/</span> <span class="n">full_credibility_standard</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">credibility</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pyre.Models.AggregateFeatures.selections.Selections" class="doc doc-heading">
            <code>Selections</code>


</h2>


    <div class="doc doc-contents ">








              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Selections</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">:</span> <span class="n">ExposureModelData</span><span class="p">,</span> 
                 <span class="n">credibility_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">CredibilityWeight</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Selections class with experience and exposure data.</span>

<span class="sd">        Args:</span>
<span class="sd">            experience_data: Experience model data containing claims and exposures</span>
<span class="sd">            exposure_data: Exposure model data containing exposures</span>
<span class="sd">            credibility_weight: Optional CredibilityWeight object for calculating weights</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span> <span class="o">=</span> <span class="n">experience_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exposure_data</span> <span class="o">=</span> <span class="n">exposure_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span> <span class="o">=</span> <span class="n">credibility_weight</span> <span class="ow">or</span> <span class="n">CredibilityWeight</span><span class="p">(</span><span class="n">experience_data</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># Default weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span> <span class="o">=</span> <span class="mf">0.5</span>    <span class="c1"># Default weight</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_experience_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the weight to assign to experience rating.</span>

<span class="sd">        Args:</span>
<span class="sd">            method: Credibility method to use (&quot;limited_fluctuation&quot;, &quot;buhlmann&quot;, </span>
<span class="sd">                   &quot;buhlmann_straub&quot;, &quot;greatest_accuracy&quot;, or &quot;bayesian&quot;)</span>
<span class="sd">            **kwargs: Additional parameters for the credibility method</span>

<span class="sd">        Returns:</span>
<span class="sd">            Weight for experience rating between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get claim count if not provided</span>
        <span class="k">if</span> <span class="s1">&#39;claim_count&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;claim_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">())</span>

        <span class="c1"># Calculate credibility based on the selected method</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">:</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">limited_fluctuation_credibility</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_count&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> 
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;full_credibility_standard&#39;</span><span class="p">,</span> <span class="mi">1082</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;buhlmann&quot;</span><span class="p">:</span>
            <span class="c1"># Get claim count if not already provided</span>
            <span class="n">claim_count</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_count&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="c1"># Get or calculate process variance and variance of hypothetical means</span>
            <span class="k">if</span> <span class="s1">&#39;data_by_group&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">data_by_group</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_by_group&#39;</span><span class="p">,</span> <span class="p">{})</span>

                <span class="c1"># Calculate variances if not provided</span>
                <span class="k">if</span> <span class="s1">&#39;expected_process_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

                <span class="k">if</span> <span class="s1">&#39;variance_of_hypothetical_means&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

            <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">buhlmann_credibility</span><span class="p">(</span>
                <span class="n">claim_count</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;buhlmann_straub&quot;</span><span class="p">:</span>
            <span class="c1"># Get exposures and claim counts</span>
            <span class="n">exposures</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exposures&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">claim_counts</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_counts&#39;</span><span class="p">,</span> <span class="p">[])</span>

            <span class="c1"># Get or calculate process variance and variance of hypothetical means</span>
            <span class="k">if</span> <span class="s1">&#39;data_by_group&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">data_by_group</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_by_group&#39;</span><span class="p">,</span> <span class="p">{})</span>

                <span class="c1"># Calculate variances if not provided</span>
                <span class="k">if</span> <span class="s1">&#39;expected_process_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

                <span class="k">if</span> <span class="s1">&#39;variance_of_hypothetical_means&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

            <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">buhlmann_straub_credibility</span><span class="p">(</span>
                <span class="n">exposures</span><span class="p">,</span>
                <span class="n">claim_counts</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;greatest_accuracy&quot;</span><span class="p">:</span>
            <span class="c1"># Get loss data if not provided</span>
            <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">amount</span> <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">()]</span>

            <span class="c1"># Get data for easier access</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">[])</span>

            <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">greatest_accuracy_credibility</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;collective_mean&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;bayesian&quot;</span><span class="p">:</span>
            <span class="c1"># Get loss data if not provided</span>
            <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">amount</span> <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">()]</span>

            <span class="c1"># Calculate data variance if not provided</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="s1">&#39;data_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">calculate_data_variance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;sample&quot;</span><span class="p">)</span>

            <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">bayesian_credibility</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prior_mean&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prior_variance&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid credibility method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">=</span> <span class="n">weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">weight</span>

        <span class="k">return</span> <span class="n">weight</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">exposure_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the weight to assign to exposure rating.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Weight for exposure rating between 0 and 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unlimited_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects the unlimited option for the subject contract by combining</span>
<span class="sd">        experience and exposure results based on their weights.</span>

<span class="sd">        Args:</span>
<span class="sd">            experience_result: Result from experience rating method</span>
<span class="sd">            exposure_result: Result from exposure rating method</span>

<span class="sd">        Returns:</span>
<span class="sd">            Weighted average of experience and exposure results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">experience_result</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">+</span> 
                <span class="n">exposure_result</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                      <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make a selection by calculating weights and combining results.</span>

<span class="sd">        Args:</span>
<span class="sd">            experience_result: Result from experience rating method</span>
<span class="sd">            exposure_result: Result from exposure rating method</span>
<span class="sd">            method: Credibility method to use</span>
<span class="sd">            **kwargs: Additional parameters for the credibility method</span>

<span class="sd">        Returns:</span>
<span class="sd">            Selected result based on weighted average</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculate_experience_weight</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Return weighted average</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unlimited_selection</span><span class="p">(</span><span class="n">experience_result</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.Selections.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">experience_data</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">,</span> <span class="n">credibility_weight</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the Selections class with experience and exposure data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>experience_data</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Experience.experience_preparer.ExperienceModelData">ExperienceModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Experience model data containing claims and exposures</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure_data</code>
            </td>
            <td>
                  <code><span title="pyre.Models.Exposure.exposure_preparer.ExposureModelData">ExposureModelData</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exposure model data containing exposures</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>credibility_weight</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="CredibilityWeight (pyre.Models.AggregateFeatures.selections.CredibilityWeight)" href="#pyre.Models.AggregateFeatures.selections.CredibilityWeight">CredibilityWeight</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional CredibilityWeight object for calculating weights</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_data</span><span class="p">:</span> <span class="n">ExperienceModelData</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">:</span> <span class="n">ExposureModelData</span><span class="p">,</span> 
             <span class="n">credibility_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">CredibilityWeight</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Selections class with experience and exposure data.</span>

<span class="sd">    Args:</span>
<span class="sd">        experience_data: Experience model data containing claims and exposures</span>
<span class="sd">        exposure_data: Exposure model data containing exposures</span>
<span class="sd">        credibility_weight: Optional CredibilityWeight object for calculating weights</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span> <span class="o">=</span> <span class="n">experience_data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exposure_data</span> <span class="o">=</span> <span class="n">exposure_data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span> <span class="o">=</span> <span class="n">credibility_weight</span> <span class="ow">or</span> <span class="n">CredibilityWeight</span><span class="p">(</span><span class="n">experience_data</span><span class="p">,</span> <span class="n">exposure_data</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># Default weight</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span> <span class="o">=</span> <span class="mf">0.5</span>    <span class="c1"># Default weight</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.Selections.calculate_experience_weight" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_experience_weight</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;limited_fluctuation&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the weight to assign to experience rating.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility method to use ("limited_fluctuation", "buhlmann", 
   "buhlmann_straub", "greatest_accuracy", or "bayesian")</p>
              </div>
            </td>
            <td>
                  <code>&#39;limited_fluctuation&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional parameters for the credibility method</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weight for experience rating between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_experience_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the weight to assign to experience rating.</span>

<span class="sd">    Args:</span>
<span class="sd">        method: Credibility method to use (&quot;limited_fluctuation&quot;, &quot;buhlmann&quot;, </span>
<span class="sd">               &quot;buhlmann_straub&quot;, &quot;greatest_accuracy&quot;, or &quot;bayesian&quot;)</span>
<span class="sd">        **kwargs: Additional parameters for the credibility method</span>

<span class="sd">    Returns:</span>
<span class="sd">        Weight for experience rating between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get claim count if not provided</span>
    <span class="k">if</span> <span class="s1">&#39;claim_count&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;claim_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">())</span>

    <span class="c1"># Calculate credibility based on the selected method</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">:</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">limited_fluctuation_credibility</span><span class="p">(</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_count&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> 
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;full_credibility_standard&#39;</span><span class="p">,</span> <span class="mi">1082</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;buhlmann&quot;</span><span class="p">:</span>
        <span class="c1"># Get claim count if not already provided</span>
        <span class="n">claim_count</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_count&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Get or calculate process variance and variance of hypothetical means</span>
        <span class="k">if</span> <span class="s1">&#39;data_by_group&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">data_by_group</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_by_group&#39;</span><span class="p">,</span> <span class="p">{})</span>

            <span class="c1"># Calculate variances if not provided</span>
            <span class="k">if</span> <span class="s1">&#39;expected_process_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;variance_of_hypothetical_means&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

        <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">buhlmann_credibility</span><span class="p">(</span>
            <span class="n">claim_count</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;buhlmann_straub&quot;</span><span class="p">:</span>
        <span class="c1"># Get exposures and claim counts</span>
        <span class="n">exposures</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exposures&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">claim_counts</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;claim_counts&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Get or calculate process variance and variance of hypothetical means</span>
        <span class="k">if</span> <span class="s1">&#39;data_by_group&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">data_by_group</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_by_group&#39;</span><span class="p">,</span> <span class="p">{})</span>

            <span class="c1"># Calculate variances if not provided</span>
            <span class="k">if</span> <span class="s1">&#39;expected_process_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_process_variance</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;variance_of_hypothetical_means&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">estimate_variance_of_hypothetical_means</span><span class="p">(</span><span class="n">data_by_group</span><span class="p">)</span>

        <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">buhlmann_straub_credibility</span><span class="p">(</span>
            <span class="n">exposures</span><span class="p">,</span>
            <span class="n">claim_counts</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expected_process_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variance_of_hypothetical_means&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;greatest_accuracy&quot;</span><span class="p">:</span>
        <span class="c1"># Get loss data if not provided</span>
        <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">amount</span> <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">()]</span>

        <span class="c1"># Get data for easier access</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">greatest_accuracy_credibility</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;collective_mean&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;bayesian&quot;</span><span class="p">:</span>
        <span class="c1"># Get loss data if not provided</span>
        <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="p">,</span> <span class="s1">&#39;subject_contract_claims&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">claim</span><span class="o">.</span><span class="n">amount</span> <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">experience_data</span><span class="o">.</span><span class="n">subject_contract_claims</span><span class="p">()]</span>

        <span class="c1"># Calculate data variance if not provided</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="s1">&#39;data_variance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;data_variance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">calculate_data_variance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;sample&quot;</span><span class="p">)</span>

        <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credibility_weight</span><span class="o">.</span><span class="n">bayesian_credibility</span><span class="p">(</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prior_mean&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prior_variance&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_variance&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid credibility method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">=</span> <span class="n">weight</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">weight</span>

    <span class="k">return</span> <span class="n">weight</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.Selections.exposure_weight" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">exposure_weight</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get the weight to assign to exposure rating.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weight for exposure rating between 0 and 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exposure_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the weight to assign to exposure rating.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Weight for exposure rating between 0 and 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.Selections.make_selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_selection</span><span class="p">(</span><span class="n">experience_result</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;limited_fluctuation&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Make a selection by calculating weights and combining results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>experience_result</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result from experience rating method</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure_result</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result from exposure rating method</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credibility method to use</p>
              </div>
            </td>
            <td>
                  <code>&#39;limited_fluctuation&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional parameters for the credibility method</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Selected result based on weighted average</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">make_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                  <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;limited_fluctuation&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make a selection by calculating weights and combining results.</span>

<span class="sd">    Args:</span>
<span class="sd">        experience_result: Result from experience rating method</span>
<span class="sd">        exposure_result: Result from exposure rating method</span>
<span class="sd">        method: Credibility method to use</span>
<span class="sd">        **kwargs: Additional parameters for the credibility method</span>

<span class="sd">    Returns:</span>
<span class="sd">        Selected result based on weighted average</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate weights</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">calculate_experience_weight</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Return weighted average</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unlimited_selection</span><span class="p">(</span><span class="n">experience_result</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.AggregateFeatures.selections.Selections.unlimited_selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unlimited_selection</span><span class="p">(</span><span class="n">experience_result</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Selects the unlimited option for the subject contract by combining
experience and exposure results based on their weights.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>experience_result</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result from experience rating method</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exposure_result</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result from exposure rating method</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weighted average of experience and exposure results</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\AggregateFeatures\selections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unlimited_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experience_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exposure_result</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects the unlimited option for the subject contract by combining</span>
<span class="sd">    experience and exposure results based on their weights.</span>

<span class="sd">    Args:</span>
<span class="sd">        experience_result: Result from experience rating method</span>
<span class="sd">        exposure_result: Result from exposure rating method</span>

<span class="sd">    Returns:</span>
<span class="sd">        Weighted average of experience and exposure results</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">experience_result</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experience_weight</span> <span class="o">+</span> 
            <span class="n">exposure_result</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exposure_weight</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.AggregateFeatures.simulation_engine"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="pyre.Models.trending"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyre.Models.trending.Trending" class="doc doc-heading">
            <code>Trending</code>


</h2>


    <div class="doc doc-contents ">


        <p>A class for trending insurance data (claims and exposures) to a common base year.</p>
<p>This class provides methods to apply trend factors to claims and exposures,
adjusting their values to account for inflation or other time-based changes.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.trending.Trending.exposure_trend_factors">exposure_trend_factors</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor for exposures
(e.g., {2020: 1.02, 2021: 1.03, ...}).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.trending.Trending.claim_trend_factors">claim_trend_factors</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor for claims
(e.g., {2020: 1.02, 2021: 1.03, ...}).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyre.Models.trending.Trending.base_year">base_year</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year to which all data will be trended.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Trending</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for trending insurance data (claims and exposures) to a common base year.</span>

<span class="sd">    This class provides methods to apply trend factors to claims and exposures,</span>
<span class="sd">    adjusting their values to account for inflation or other time-based changes.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        exposure_trend_factors (Dict[int, float]): Mapping of year to annual trend factor for exposures</span>
<span class="sd">            (e.g., {2020: 1.02, 2021: 1.03, ...}).</span>
<span class="sd">        claim_trend_factors (Dict[int, float]): Mapping of year to annual trend factor for claims</span>
<span class="sd">            (e.g., {2020: 1.02, 2021: 1.03, ...}).</span>
<span class="sd">        base_year (int): The year to which all data will be trended.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposure_trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">claim_trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">base_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Trending class with trend factors and a base year.</span>

<span class="sd">        Args:</span>
<span class="sd">            exposure_trend_factors (Dict[int, float]): Mapping of year to annual trend factor for exposures</span>
<span class="sd">                (e.g., {2020: 1.02, 2021: 1.03, ...}).</span>
<span class="sd">            claim_trend_factors (Dict[int, float], optional): Mapping of year to annual trend factor for claims.</span>
<span class="sd">                If None, exposure_trend_factors will be used for claims as well.</span>
<span class="sd">            trend_factors (Dict[int, float], optional): For backward compatibility. If provided, both</span>
<span class="sd">                exposure_trend_factors and claim_trend_factors will be set to this value.</span>
<span class="sd">            base_year (int): The year to which all data will be trended.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span> <span class="o">=</span> <span class="n">exposure_trend_factors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span> <span class="o">=</span> <span class="n">claim_trend_factors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span> <span class="o">=</span> <span class="n">base_year</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_inputs</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate the trend factors and base year.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If trend factors dictionaries are empty or base_year is not an integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Exposure trend factors dictionary cannot be empty&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Claim trend factors dictionary cannot be empty&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Base year must be an integer&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_trend_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">for_claims</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the trend factor between the origin year and the base year.</span>

<span class="sd">        Args:</span>
<span class="sd">            origin_year (int): The year from which to trend.</span>
<span class="sd">            for_claims (bool, optional): If True, use claim trend factors. If False, use exposure trend factors.</span>
<span class="sd">                Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The calculated trend factor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Select the appropriate trend factors based on the for_claims parameter</span>
        <span class="n">trend_factors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span> <span class="k">if</span> <span class="n">for_claims</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span>

        <span class="k">if</span> <span class="n">origin_year</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">origin_year</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">:</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">):</span>
                <span class="n">factor</span> <span class="o">*=</span> <span class="n">trend_factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">factor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">,</span> <span class="n">origin_year</span><span class="p">):</span>
                <span class="n">factor</span> <span class="o">/=</span> <span class="n">trend_factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">factor</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trend_exposures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">Exposures</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Exposures</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply trend factors to a collection of exposures.</span>

<span class="sd">        Args:</span>
<span class="sd">            exposures (Exposures): The original Exposures object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Exposures: A new Exposures object with trended values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">trended_exposures</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">exposure</span> <span class="ow">in</span> <span class="n">exposures</span><span class="p">:</span>
            <span class="c1"># Get the modelling year and exposure value</span>
            <span class="n">origin_year</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">modelling_year</span><span class="p">()</span>

            <span class="c1"># Create a new exposure with trended values</span>
            <span class="c1"># Use exposure trend factors (for_claims=False is the default)</span>
            <span class="n">trend_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Get the original exposure values</span>
            <span class="n">original_values</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">exposure_values</span><span class="p">()</span>
            <span class="n">trended_value</span> <span class="o">=</span> <span class="n">original_values</span><span class="o">.</span><span class="n">exposure_value</span> <span class="o">*</span> <span class="n">trend_factor</span>

            <span class="c1"># Create new ExposureValues with the trended value</span>
            <span class="n">new_values</span> <span class="o">=</span> <span class="n">ExposureValues</span><span class="p">(</span>
                <span class="n">exposure_value</span><span class="o">=</span><span class="n">trended_value</span><span class="p">,</span>
                <span class="n">attachment_point</span><span class="o">=</span><span class="n">original_values</span><span class="o">.</span><span class="n">attachment_point</span><span class="p">,</span>
                <span class="n">limit</span><span class="o">=</span><span class="n">original_values</span><span class="o">.</span><span class="n">limit</span>
            <span class="p">)</span>

            <span class="c1"># Create a new Exposure with the same metadata but trended values</span>
            <span class="n">new_exposure</span> <span class="o">=</span> <span class="n">Exposure</span><span class="p">(</span>
                <span class="n">exposure_meta</span><span class="o">=</span><span class="n">exposure</span><span class="o">.</span><span class="n">exposure_meta</span><span class="p">,</span>
                <span class="n">exposure_values</span><span class="o">=</span><span class="n">new_values</span>
            <span class="p">)</span>

            <span class="n">trended_exposures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_exposure</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Exposures</span><span class="p">(</span><span class="n">trended_exposures</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_trend_factors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the trend factors from this Trending instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Dict[int, float]]: A dictionary with keys &#39;exposure&#39; and &#39;claim&#39;, each mapping to</span>
<span class="sd">                their respective trend factors dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span><span class="p">,</span>
            <span class="s1">&#39;claim&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trend_claims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claims</span><span class="p">:</span> <span class="n">Claims</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Claims</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply trend factors to a collection of claims.</span>

<span class="sd">        Args:</span>
<span class="sd">            claims (Claims): The original Claims object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Claims: A new Claims object with trended ClaimDevelopmentHistory for each claim.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">trended_claims</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="n">claims</span><span class="o">.</span><span class="n">claims</span><span class="p">:</span>
            <span class="c1"># Get the modelling year for trending</span>
            <span class="n">origin_year</span> <span class="o">=</span> <span class="n">claim</span><span class="o">.</span><span class="n">claims_meta_data</span><span class="o">.</span><span class="n">modelling_year</span>
            <span class="c1"># Use claim trend factors (for_claims=True)</span>
            <span class="n">trend_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Get the development history</span>
            <span class="n">dev_hist</span> <span class="o">=</span> <span class="n">claim</span><span class="o">.</span><span class="n">uncapped_claim_development_history</span>

            <span class="c1"># Trend all paid and incurred values in the development history</span>
            <span class="n">trended_paid</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">trend_factor</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dev_hist</span><span class="o">.</span><span class="n">cumulative_dev_paid</span><span class="p">]</span>
            <span class="n">trended_incurred</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">trend_factor</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dev_hist</span><span class="o">.</span><span class="n">cumulative_dev_incurred</span><span class="p">]</span>

            <span class="c1"># Create a new development history with trended values</span>
            <span class="n">trended_dev_hist</span> <span class="o">=</span> <span class="n">ClaimDevelopmentHistory</span><span class="p">(</span>
                <span class="n">development_months</span><span class="o">=</span><span class="n">dev_hist</span><span class="o">.</span><span class="n">development_months</span><span class="p">,</span>
                <span class="n">cumulative_dev_paid</span><span class="o">=</span><span class="n">trended_paid</span><span class="p">,</span>
                <span class="n">cumulative_dev_incurred</span><span class="o">=</span><span class="n">trended_incurred</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Create a new Claim with the same metadata and trended development history</span>
            <span class="n">trended_claim</span> <span class="o">=</span> <span class="n">Claim</span><span class="p">(</span>
                <span class="n">claims_meta_data</span><span class="o">=</span><span class="n">claim</span><span class="o">.</span><span class="n">claims_meta_data</span><span class="p">,</span> 
                <span class="n">claims_development_history</span><span class="o">=</span><span class="n">trended_dev_hist</span>
            <span class="p">)</span>

            <span class="n">trended_claims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trended_claim</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Claims</span><span class="p">(</span><span class="n">trended_claims</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pyre.Models.trending.Trending.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">exposure_trend_factors</span><span class="p">,</span> <span class="n">claim_trend_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trend_factors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_year</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the Trending class with trend factors and a base year.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exposure_trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor for exposures
(e.g., {2020: 1.02, 2021: 1.03, ...}).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>claim_trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor for claims.
If None, exposure_trend_factors will be used for claims as well.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For backward compatibility. If provided, both
exposure_trend_factors and claim_trend_factors will be set to this value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year to which all data will be trended.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposure_trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">claim_trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">base_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Trending class with trend factors and a base year.</span>

<span class="sd">    Args:</span>
<span class="sd">        exposure_trend_factors (Dict[int, float]): Mapping of year to annual trend factor for exposures</span>
<span class="sd">            (e.g., {2020: 1.02, 2021: 1.03, ...}).</span>
<span class="sd">        claim_trend_factors (Dict[int, float], optional): Mapping of year to annual trend factor for claims.</span>
<span class="sd">            If None, exposure_trend_factors will be used for claims as well.</span>
<span class="sd">        trend_factors (Dict[int, float], optional): For backward compatibility. If provided, both</span>
<span class="sd">            exposure_trend_factors and claim_trend_factors will be set to this value.</span>
<span class="sd">        base_year (int): The year to which all data will be trended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span> <span class="o">=</span> <span class="n">exposure_trend_factors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span> <span class="o">=</span> <span class="n">claim_trend_factors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span> <span class="o">=</span> <span class="n">base_year</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_inputs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.trending.Trending.calculate_trend_factor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the trend factor between the origin year and the base year.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>origin_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year from which to trend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>for_claims</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, use claim trend factors. If False, use exposure trend factors.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The calculated trend factor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_trend_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">for_claims</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the trend factor between the origin year and the base year.</span>

<span class="sd">    Args:</span>
<span class="sd">        origin_year (int): The year from which to trend.</span>
<span class="sd">        for_claims (bool, optional): If True, use claim trend factors. If False, use exposure trend factors.</span>
<span class="sd">            Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The calculated trend factor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Select the appropriate trend factors based on the for_claims parameter</span>
    <span class="n">trend_factors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span> <span class="k">if</span> <span class="n">for_claims</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span>

    <span class="k">if</span> <span class="n">origin_year</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span>
    <span class="k">elif</span> <span class="n">origin_year</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">:</span>
        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">):</span>
            <span class="n">factor</span> <span class="o">*=</span> <span class="n">trend_factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">factor</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_year</span><span class="p">,</span> <span class="n">origin_year</span><span class="p">):</span>
            <span class="n">factor</span> <span class="o">/=</span> <span class="n">trend_factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">factor</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.trending.Trending.get_trend_factors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_trend_factors</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get the trend factors from this Trending instance.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Dict[int, float]]: A dictionary with keys 'exposure' and 'claim', each mapping to
their respective trend factors dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_trend_factors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the trend factors from this Trending instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Dict[int, float]]: A dictionary with keys &#39;exposure&#39; and &#39;claim&#39;, each mapping to</span>
<span class="sd">            their respective trend factors dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">exposure_trend_factors</span><span class="p">,</span>
        <span class="s1">&#39;claim&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">claim_trend_factors</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.trending.Trending.trend_claims" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trend_claims</span><span class="p">(</span><span class="n">claims</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply trend factors to a collection of claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>claims</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Claims (pyre.claims.claims.Claims)" href="../claims/#pyre.claims.claims.Claims">Claims</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original Claims object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Claims</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Claims (pyre.claims.claims.Claims)" href="../claims/#pyre.claims.claims.Claims">Claims</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new Claims object with trended ClaimDevelopmentHistory for each claim.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trend_claims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">claims</span><span class="p">:</span> <span class="n">Claims</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Claims</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply trend factors to a collection of claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        claims (Claims): The original Claims object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Claims: A new Claims object with trended ClaimDevelopmentHistory for each claim.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trended_claims</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">claim</span> <span class="ow">in</span> <span class="n">claims</span><span class="o">.</span><span class="n">claims</span><span class="p">:</span>
        <span class="c1"># Get the modelling year for trending</span>
        <span class="n">origin_year</span> <span class="o">=</span> <span class="n">claim</span><span class="o">.</span><span class="n">claims_meta_data</span><span class="o">.</span><span class="n">modelling_year</span>
        <span class="c1"># Use claim trend factors (for_claims=True)</span>
        <span class="n">trend_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Get the development history</span>
        <span class="n">dev_hist</span> <span class="o">=</span> <span class="n">claim</span><span class="o">.</span><span class="n">uncapped_claim_development_history</span>

        <span class="c1"># Trend all paid and incurred values in the development history</span>
        <span class="n">trended_paid</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">trend_factor</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dev_hist</span><span class="o">.</span><span class="n">cumulative_dev_paid</span><span class="p">]</span>
        <span class="n">trended_incurred</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">trend_factor</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dev_hist</span><span class="o">.</span><span class="n">cumulative_dev_incurred</span><span class="p">]</span>

        <span class="c1"># Create a new development history with trended values</span>
        <span class="n">trended_dev_hist</span> <span class="o">=</span> <span class="n">ClaimDevelopmentHistory</span><span class="p">(</span>
            <span class="n">development_months</span><span class="o">=</span><span class="n">dev_hist</span><span class="o">.</span><span class="n">development_months</span><span class="p">,</span>
            <span class="n">cumulative_dev_paid</span><span class="o">=</span><span class="n">trended_paid</span><span class="p">,</span>
            <span class="n">cumulative_dev_incurred</span><span class="o">=</span><span class="n">trended_incurred</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create a new Claim with the same metadata and trended development history</span>
        <span class="n">trended_claim</span> <span class="o">=</span> <span class="n">Claim</span><span class="p">(</span>
            <span class="n">claims_meta_data</span><span class="o">=</span><span class="n">claim</span><span class="o">.</span><span class="n">claims_meta_data</span><span class="p">,</span> 
            <span class="n">claims_development_history</span><span class="o">=</span><span class="n">trended_dev_hist</span>
        <span class="p">)</span>

        <span class="n">trended_claims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trended_claim</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Claims</span><span class="p">(</span><span class="n">trended_claims</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pyre.Models.trending.Trending.trend_exposures" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trend_exposures</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply trend factors to a collection of exposures.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Exposures (pyre.exposures.exposures.Exposures)" href="../exposures/#pyre.exposures.exposures.Exposures">Exposures</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original Exposures object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Exposures</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Exposures (pyre.exposures.exposures.Exposures)" href="../exposures/#pyre.exposures.exposures.Exposures">Exposures</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new Exposures object with trended values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trend_exposures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exposures</span><span class="p">:</span> <span class="n">Exposures</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Exposures</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply trend factors to a collection of exposures.</span>

<span class="sd">    Args:</span>
<span class="sd">        exposures (Exposures): The original Exposures object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Exposures: A new Exposures object with trended values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trended_exposures</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">exposure</span> <span class="ow">in</span> <span class="n">exposures</span><span class="p">:</span>
        <span class="c1"># Get the modelling year and exposure value</span>
        <span class="n">origin_year</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">modelling_year</span><span class="p">()</span>

        <span class="c1"># Create a new exposure with trended values</span>
        <span class="c1"># Use exposure trend factors (for_claims=False is the default)</span>
        <span class="n">trend_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Get the original exposure values</span>
        <span class="n">original_values</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">exposure_values</span><span class="p">()</span>
        <span class="n">trended_value</span> <span class="o">=</span> <span class="n">original_values</span><span class="o">.</span><span class="n">exposure_value</span> <span class="o">*</span> <span class="n">trend_factor</span>

        <span class="c1"># Create new ExposureValues with the trended value</span>
        <span class="n">new_values</span> <span class="o">=</span> <span class="n">ExposureValues</span><span class="p">(</span>
            <span class="n">exposure_value</span><span class="o">=</span><span class="n">trended_value</span><span class="p">,</span>
            <span class="n">attachment_point</span><span class="o">=</span><span class="n">original_values</span><span class="o">.</span><span class="n">attachment_point</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">original_values</span><span class="o">.</span><span class="n">limit</span>
        <span class="p">)</span>

        <span class="c1"># Create a new Exposure with the same metadata but trended values</span>
        <span class="n">new_exposure</span> <span class="o">=</span> <span class="n">Exposure</span><span class="p">(</span>
            <span class="n">exposure_meta</span><span class="o">=</span><span class="n">exposure</span><span class="o">.</span><span class="n">exposure_meta</span><span class="p">,</span>
            <span class="n">exposure_values</span><span class="o">=</span><span class="n">new_values</span>
        <span class="p">)</span>

        <span class="n">trended_exposures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_exposure</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Exposures</span><span class="p">(</span><span class="n">trended_exposures</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="pyre.Models.trending.calculate_trend_factor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">base_year</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculate the trend factor between the origin year and the base year.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>origin_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year from which to trend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year to which to trend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>for_claims</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, use as claim trend factors. If False, use as exposure trend factors.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The calculated trend factor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">base_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">for_claims</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the trend factor between the origin year and the base year.</span>

<span class="sd">    Args:</span>
<span class="sd">        origin_year (int): The year from which to trend.</span>
<span class="sd">        base_year (int): The year to which to trend.</span>
<span class="sd">        trend_factors (Dict[int, float]): Mapping of year to annual trend factor.</span>
<span class="sd">        for_claims (bool, optional): If True, use as claim trend factors. If False, use as exposure trend factors.</span>
<span class="sd">            Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The calculated trend factor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">for_claims</span><span class="p">:</span>
        <span class="n">trending</span> <span class="o">=</span> <span class="n">Trending</span><span class="p">(</span><span class="n">exposure_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">claim_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="o">=</span><span class="n">base_year</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">trending</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">trending</span> <span class="o">=</span> <span class="n">Trending</span><span class="p">(</span><span class="n">exposure_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">claim_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="o">=</span><span class="n">base_year</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">trending</span><span class="o">.</span><span class="n">calculate_trend_factor</span><span class="p">(</span><span class="n">origin_year</span><span class="p">,</span> <span class="n">for_claims</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.trending.get_trend_factors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_trend_factors</span><span class="p">(</span><span class="n">trending_instance</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Get the trend factors from a Trending instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trending_instance</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Trending (pyre.Models.trending.Trending)" href="#pyre.Models.trending.Trending">Trending</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Trending instance to get trend factors from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Dict[int, float]]: A dictionary with keys 'exposure' and 'claim', each mapping to
their respective trend factors dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_trend_factors</span><span class="p">(</span><span class="n">trending_instance</span><span class="p">:</span> <span class="n">Trending</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the trend factors from a Trending instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        trending_instance (Trending): The Trending instance to get trend factors from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Dict[int, float]]: A dictionary with keys &#39;exposure&#39; and &#39;claim&#39;, each mapping to</span>
<span class="sd">            their respective trend factors dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="n">trending_instance</span><span class="o">.</span><span class="n">exposure_trend_factors</span><span class="p">,</span>
        <span class="s1">&#39;claim&#39;</span><span class="p">:</span> <span class="n">trending_instance</span><span class="o">.</span><span class="n">claim_trend_factors</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.trending.trend_claims" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trend_claims</span><span class="p">(</span><span class="n">claims</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply trend factors to a collection of claims.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>claims</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Claims (pyre.claims.claims.Claims)" href="../claims/#pyre.claims.claims.Claims">Claims</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original Claims object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year to which all claims will be trended.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Claims</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Claims (pyre.claims.claims.Claims)" href="../claims/#pyre.claims.claims.Claims">Claims</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new Claims object with trended ClaimDevelopmentHistory for each claim.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trend_claims</span><span class="p">(</span><span class="n">claims</span><span class="p">:</span> <span class="n">Claims</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">base_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Claims</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply trend factors to a collection of claims.</span>

<span class="sd">    Args:</span>
<span class="sd">        claims (Claims): The original Claims object.</span>
<span class="sd">        trend_factors (Dict[int, float]): Mapping of year to annual trend factor.</span>
<span class="sd">        base_year (int): The year to which all claims will be trended.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Claims: A new Claims object with trended ClaimDevelopmentHistory for each claim.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trending</span> <span class="o">=</span> <span class="n">Trending</span><span class="p">(</span><span class="n">exposure_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">claim_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="o">=</span><span class="n">base_year</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">trending</span><span class="o">.</span><span class="n">trend_claims</span><span class="p">(</span><span class="n">claims</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pyre.Models.trending.trend_exposures" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trend_exposures</span><span class="p">(</span><span class="n">exposures</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Apply trend factors to a collection of exposures.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exposures</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Exposures (pyre.exposures.exposures.Exposures)" href="../exposures/#pyre.exposures.exposures.Exposures">Exposures</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original Exposures object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trend_factors</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of year to annual trend factor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The year to which all exposures will be trended.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Exposures</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Exposures (pyre.exposures.exposures.Exposures)" href="../exposures/#pyre.exposures.exposures.Exposures">Exposures</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new Exposures object with trended values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\pyre\Models\trending.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trend_exposures</span><span class="p">(</span><span class="n">exposures</span><span class="p">:</span> <span class="n">Exposures</span><span class="p">,</span> <span class="n">trend_factors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">base_year</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Exposures</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply trend factors to a collection of exposures.</span>

<span class="sd">    Args:</span>
<span class="sd">        exposures (Exposures): The original Exposures object.</span>
<span class="sd">        trend_factors (Dict[int, float]): Mapping of year to annual trend factor.</span>
<span class="sd">        base_year (int): The year to which all exposures will be trended.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Exposures: A new Exposures object with trended values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trending</span> <span class="o">=</span> <span class="n">Trending</span><span class="p">(</span><span class="n">exposure_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">claim_trend_factors</span><span class="o">=</span><span class="n">trend_factors</span><span class="p">,</span> <span class="n">base_year</span><span class="o">=</span><span class="n">base_year</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">trending</span><span class="o">.</span><span class="n">trend_exposures</span><span class="p">(</span><span class="n">exposures</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>